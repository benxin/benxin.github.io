<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Docker 入门(备忘)</title>
      <link href="/2019/10/04/Docker%20%E5%85%A5%E9%97%A8(%E5%A4%87%E5%BF%98)/"/>
      <url>/2019/10/04/Docker%20%E5%85%A5%E9%97%A8(%E5%A4%87%E5%BF%98)/</url>
      
        <content type="html"><![CDATA[<h2 id="Docker-简介"><a href="#Docker-简介" class="headerlink" title="Docker 简介"></a>Docker 简介</h2><p>​    Docker 是一个能够把开发的应用程序,自动化部署到容器的开源引擎,由Docker 团队使用Go语言编写,基于Apache2.0开源授权协议发行.</p><h3 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h3><ol><li><p>卸载旧版本</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove docker docker-engine docker.io containerd runc</span><br></pre></td></tr></table></figure></li><li><p>添加官方密钥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install \</span><br><span class="line">    apt-transport-https \</span><br><span class="line">    ca-certificates \</span><br><span class="line">    curl \</span><br><span class="line">    gnupg2 \</span><br><span class="line">    software-properties-common    </span><br><span class="line">    </span><br><span class="line">curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -</span><br></pre></td></tr></table></figure></li><li><p>设置Docker 仓库镜像源(使用清华大学的Docker镜像源)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository \</span><br><span class="line">   "deb [arch=amd64] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/debian \</span><br><span class="line"><span class="meta">   $</span><span class="bash">(lsb_release -cs) \</span></span><br><span class="line">   stable"</span><br><span class="line">      </span><br><span class="line"><span class="meta">#</span><span class="bash"> 官方源 (在中国区不建议使用,因为非常缓慢.)</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo add-apt-repository \</span></span><br><span class="line">   "deb [arch=amd64] https://download.docker.com/linux/debian \</span><br><span class="line"><span class="meta">   $</span><span class="bash">(lsb_release -cs) \</span></span><br><span class="line">   stable"</span><br></pre></td></tr></table></figure></li><li><p>安装Docker </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update    </span><br><span class="line">sudo apt-get install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure></li><li><p>Docker 启动,关闭等操作.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[start]启动 | [restart]重启 |  [stop]停止 | [disable] 禁用开机启动</span><br><span class="line">sudo systemctl enable docker    # 设置docker开机启动.</span><br></pre></td></tr></table></figure></li></ol><ol start="6"><li><p>验证是否正常安装Docker </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run hello-world</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 出现以下信息说明Docker安装成功!</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo docker run hello-world</span></span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the "hello-world" image from the Docker Hub.</span><br><span class="line">    (amd64)</span><br><span class="line"> 3. The Docker daemon created a new container from that image which runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, which sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"><span class="meta"> $</span><span class="bash"> docker run -it ubuntu bash</span></span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://hub.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/get-started/</span><br></pre></td></tr></table></figure></li></ol><ol start="7"><li><p>将用户添加到Docker  避免每次使用Docker 前加sudo权限.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo groupadd docker</span><br><span class="line">sudo usermod -aG docker $USER</span><br></pre></td></tr></table></figure></li><li><p>查看Docker 信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker version    <span class="comment"># 查看docker版本信息</span></span></span><br><span class="line">Client: Docker Engine - Community</span><br><span class="line"> Version:           19.03.2</span><br><span class="line"> API version:       1.40</span><br><span class="line"> Go version:        go1.12.8</span><br><span class="line"> Git commit:        6a30dfc</span><br><span class="line"> Built:             Thu Aug 29 05:29:29 2019</span><br><span class="line"> OS/Arch:           linux/amd64</span><br><span class="line"> Experimental:      false</span><br><span class="line"> ----------------------------------------------------------------------------</span><br><span class="line"><span class="meta"> #</span><span class="bash"> 查看 docker运行状态</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> systemctl status docker      </span></span><br><span class="line">● docker.service - Docker Application Container Engine</span><br><span class="line">   Loaded: loaded (/lib/systemd/system/docker.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: active (running) since Thu 2019-10-03 12:35:12 CST; 6min ago</span><br><span class="line">     Docs: https://docs.docker.com</span><br><span class="line"> Main PID: 46498 (dockerd)</span><br><span class="line">    Tasks: 20</span><br><span class="line">   Memory: 49.3M</span><br><span class="line">   CGroup: /system.slice/docker.service</span><br><span class="line">           └─46498 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock</span><br></pre></td></tr></table></figure></li><li><p>查找镜像/拉取镜像</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker search debian</span><br><span class="line">docker pull debian</span><br></pre></td></tr></table></figure></li><li><p>查看已有的镜像/删除特定的镜像</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">docker image ls # 查看已有镜像</span><br><span class="line">        </span><br><span class="line"><span class="meta">$</span><span class="bash"> docker image ls         </span></span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">redis               latest              01a52b3b5cd1        8 days ago          98.2MB</span><br><span class="line">python              3.7-slim            b5a7c089ece3        3 weeks ago         179MB</span><br><span class="line">debian              latest              c2c03a296d23        3 weeks ago         114MB</span><br><span class="line">hello-world         latest              fce289e99eb9        9 months ago        1.84kB</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除redis rm后面跟上 IMAGE ID 如果要删除多个,空格后写上IMAGE ID</span></span><br><span class="line">docker image rm 01a52b3b5cd1   </span><br><span class="line">docker image rm 01a52b3b5cd1 b5a7c089ece3  # 删除 redis和 python</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 强制删除redis</span></span><br><span class="line">docker image rm -f  01a52b3b5cd1</span><br></pre></td></tr></table></figure></li></ol><ol start="11"><li><p>卸载Docker </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get purge docker-ce</span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除所有images,containers和volumes</span></span><br><span class="line">sudo rm -rf /var/lib/docker</span><br></pre></td></tr></table></figure></li></ol><h3 id="跑一个简单的webapp"><a href="#跑一个简单的webapp" class="headerlink" title="跑一个简单的webapp"></a>跑一个简单的webapp</h3><ol><li><p>创建 mydocker目录</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd ~  </span><br><span class="line">mkdir mydocker</span><br><span class="line">cd mydocker</span><br></pre></td></tr></table></figure></li></ol><ol start="2"><li><p>在mydocker目录下,创建并打开Dockerfile , 在Dockerfile  文件中写入以下内容.  </p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Use an official Python runtime as a parent image</span></span><br><span class="line">FROM python:3.7-slim</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set the working directory to /app</span></span><br><span class="line">WORKDIR /app</span><br><span class="line"></span><br><span class="line"><span class="comment"># Copy the current directory contents into the container at /app</span></span><br><span class="line">COPY . /app</span><br><span class="line"></span><br><span class="line"><span class="comment"># Install any needed packages specified in requirements.txt</span></span><br><span class="line">RUN pip install --trusted-host pypi.python.org -r requirements.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Make port 80 available to the world outside this container</span></span><br><span class="line">EXPOSE 80</span><br><span class="line"></span><br><span class="line"><span class="comment"># Define environment variable</span></span><br><span class="line">ENV NAME World</span><br><span class="line"></span><br><span class="line"><span class="comment"># Run app.py when the container launches</span></span><br><span class="line">CMD [<span class="string">"python"</span>, <span class="string">"app.py"</span>]</span><br></pre></td></tr></table></figure></li><li><p>在mydocker目录下,创建 requirements.txt 文件,在requirements.txt写入以下内容. </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Flask</span><br><span class="line">Redis</span><br></pre></td></tr></table></figure></li></ol><ol start="4"><li><p>在mydocker目录下,创建一个app.py 文件写入以下内容. </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> redis <span class="keyword">import</span> Redis, RedisError</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="comment"># Connect to Redis</span></span><br><span class="line">redis = Redis(host=<span class="string">"redis"</span>, db=<span class="number">0</span>, socket_connect_timeout=<span class="number">2</span>, socket_timeout=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route("/")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        visits = redis.incr(<span class="string">"counter"</span>)</span><br><span class="line">    <span class="keyword">except</span> RedisError:</span><br><span class="line">        visits = <span class="string">"&lt;i&gt;cannot connect to Redis, counter disabled&lt;/i&gt;"</span></span><br><span class="line"></span><br><span class="line">    html = <span class="string">"&lt;h3&gt; Welcome to docker page!&lt;/h3&gt;"</span> \</span><br><span class="line">           <span class="string">"&lt;h3&gt;Hello &#123;name&#125;!&lt;/h3&gt;"</span> \</span><br><span class="line">           <span class="string">"&lt;b&gt;Hostname:&lt;/b&gt; &#123;hostname&#125;&lt;br/&gt;"</span> \</span><br><span class="line">           <span class="string">"&lt;b&gt;Visits:&lt;/b&gt; &#123;visits&#125;"</span></span><br><span class="line">    <span class="keyword">return</span> html.format(name=os.getenv(<span class="string">"NAME"</span>, <span class="string">"world"</span>), hostname=socket.gethostname(), visits=visits)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app.run(host=<span class="string">'0.0.0.0'</span>, port=<span class="number">80</span>)</span><br></pre></td></tr></table></figure></li></ol><ol start="5"><li><p>安装docker-compose</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 运行以下命令以下载Docker Compose的当前稳定版本：</span></span><br><span class="line">sudo curl -L "https://github.com/docker/compose/releases/download/1.24.1/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将可执行权限应用于二进制文件：</span></span><br><span class="line">sudo chmod +x /usr/local/bin/docker-compose</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建软连接</span></span><br><span class="line">sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看版本信息</span></span><br><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure></li></ol><ol start="6"><li><p>在mydocker目录下,创建docker-compose.yml文件. </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">'3'</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"><span class="attr">    web:</span></span><br><span class="line"><span class="attr">        build:</span> <span class="string">.</span></span><br><span class="line"><span class="attr">        ports:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">"4000:80"</span></span><br><span class="line"><span class="attr">        volumes:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">.:/code</span></span><br><span class="line"><span class="attr">        depends_on:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">redis</span></span><br><span class="line"><span class="attr">    redis:</span></span><br><span class="line"><span class="attr">        image:</span> <span class="string">redis</span></span><br></pre></td></tr></table></figure></li></ol><p>​                </p><ol start="7"><li><p>检查文件 mydocker目录结构,mydocker目录下总共有4个文件.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> tree mydocker </span></span><br><span class="line">mydocker</span><br><span class="line">├── app.py</span><br><span class="line">├── docker-compose.yml</span><br><span class="line">├── Dockerfile</span><br><span class="line">└── requirements.txt</span><br></pre></td></tr></table></figure></li></ol><ol start="8"><li><p>运行应用程序.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker-compose up</span></span><br></pre></td></tr></table></figure></li></ol><ol start="9"><li><p>查看结果.</p><blockquote><p> 在浏览器访问url:  <a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a></p></blockquote></li></ol><p><img src="https://raw.githubusercontent.com/benxin/photo/master/img/%2020191004140525.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python中的编解码问题,UnicodeEncodeError和UnicodeDecodeError</title>
      <link href="/2019/09/29/Python%20%E4%B8%AD%E7%9A%84%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98/"/>
      <url>/2019/09/29/Python%20%E4%B8%AD%E7%9A%84%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h3 id="Python-中的编码问题"><a href="#Python-中的编码问题" class="headerlink" title="Python 中的编码问题."></a>Python 中的编码问题.</h3><p>相信大部分使用python的用户,都遇到过Python的编解码出错的问题,很不幸我也遇到过,今天写个笔记,当备忘.</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>Unicode</td><td>计算机科学领域里的一项业界标准 (中文：万国码、国际码)</td></tr><tr><td>UTF-8</td><td>是一种针对Unicode的可变长度字符编码,它可以用来表示Unicode标准中的任意字符,UTF-8是Unicode的实现方式之一.</td></tr><tr><td>GB2312</td><td>我国早期的,国家标准简体中文字符集,未收录繁体字.</td></tr><tr><td>GB18030</td><td>《信息技术　中文编码字符集》GB18030完全向后兼容GBK, GB2312</td></tr><tr><td>Big5</td><td>Big5 又称为五大码 普及地区 台湾/香港/澳门  (使用繁体中文,正体中文)</td></tr><tr><td>ASCII</td><td>美国信息交换标准代码,是基于拉丁拉丁字母的一套计算机编码系统.</td></tr><tr><td>UnicodeEncodeError</td><td>把字符转换成二进制序列出错</td></tr><tr><td>UnicodeDecodeError</td><td>把二进制序列转换成字符串出错</td></tr><tr><td>bytes  —&gt;  str</td><td>使用decode解码</td></tr><tr><td>str    —&gt;    bytes</td><td>使用encode编码码</td></tr></tbody></table><p>UnicodeEncodeError  demo</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">'python之禪'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用utf-8编码</span></span><br><span class="line">In [<span class="number">18</span>]: ret = str.encode(<span class="string">'utf-8'</span>)</span><br><span class="line">In [<span class="number">19</span>]: ret</span><br><span class="line">Out[<span class="number">20</span>]: <span class="string">b'python\xe4\xb9\x8b\xe7\xa6\xaa'</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 使用big5编码</span></span><br><span class="line">In [<span class="number">22</span>]: ret = str.encode(<span class="string">'big5'</span>)</span><br><span class="line">In [<span class="number">23</span>]: ret</span><br><span class="line">Out[<span class="number">23</span>]: <span class="string">b'python\xa4\xa7\xc1I'</span></span><br><span class="line">    </span><br><span class="line"> <span class="comment"># 使用gb2312进行编码时,编码出错抛出 UnicodeEncodeError</span></span><br><span class="line">In [<span class="number">26</span>]: ret = str.encode(<span class="string">'gb2312'</span>)</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">UnicodeEncodeError                        Traceback (most recent call last)</span><br><span class="line">&lt;ipython-input<span class="number">-26</span><span class="number">-94</span>b37d4914e4&gt; <span class="keyword">in</span> &lt;module&gt;()</span><br><span class="line">----&gt; 1 ret = str.encode('gb2312')</span><br><span class="line"></span><br><span class="line">UnicodeEncodeError: <span class="string">'gb2312'</span> codec can<span class="string">'t encode character '</span>\u79aa<span class="string">' in position 7: illegal multibyte sequence</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string"># 使用gb18030编码</span></span><br><span class="line"><span class="string">In [63]: str = '</span>python之禪<span class="string">'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In [64]: ret = str.encode('</span>gb18030<span class="string">')</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In [65]: ret</span></span><br><span class="line"><span class="string">Out[65]: b'</span>python\xd6\xae\xb6U<span class="string">'</span></span><br></pre></td></tr></table></figure><p>上面使用gb2312 进行编码,出现UnicodeEncodeError错误的原因是,gb2312标准中收录的字符,并未涵盖繁体中文字,而上面的python之禪中的”禪”字正好是一个繁体字,因此使用gb2312就无法对它进行编码,所以会抛出UnicodeEncodeError,而后来使用的gbk和gb18030则解决了这个问题.</p><p>UnicodeDecodeError  demo</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  通过编码汉字'之禪'得到bytes类型数据 b'\xd6\xae\xb6U'</span></span><br><span class="line">In [<span class="number">96</span>]: str = <span class="string">'之禪'</span>.encode(<span class="string">'gb18030'</span>)</span><br><span class="line">In [<span class="number">97</span>]: str</span><br><span class="line">Out[<span class="number">97</span>]: <span class="string">b'\xd6\xae\xb6U'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用big5解码发现汉字'之禪'使用gb18030编码成bytes类型数据后,如果再用big5解码就会货不对版.    </span></span><br><span class="line">In [<span class="number">99</span>]: <span class="string">b'\xd6\xae\xb6U'</span>.decode(<span class="string">'big5'</span>)</span><br><span class="line">Out[<span class="number">99</span>]: <span class="string">'眳貸'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 接下来在使用utf-8看下,直接抛出异常.</span></span><br><span class="line">In [<span class="number">100</span>]: <span class="string">b'\xd6\xae\xb6U'</span>.decode(<span class="string">'utf-8'</span>)</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">UnicodeDecodeError                        Traceback (most recent call last)</span><br><span class="line">&lt;ipython-input<span class="number">-100</span><span class="number">-48</span>aba63cd6ed&gt; <span class="keyword">in</span> &lt;module&gt;()</span><br><span class="line">----&gt; 1 b'\xd6\xae\xb6U'.decode('utf-8')</span><br><span class="line"></span><br><span class="line">UnicodeDecodeError: <span class="string">'utf-8'</span> codec can<span class="string">'t decode byte 0xb6 in position 2: invalid start byte</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 再看下这个例子: 通过下面这个例子我们可以知道对于拉丁字母,使用utf-8,和gb18030,big5这几种编码方式进行编码,它都占用一个字节.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In [77]: len('</span>p<span class="string">'.encode('</span>utf<span class="number">-8</span><span class="string">'))</span></span><br><span class="line"><span class="string">Out[77]: 1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In [78]: len('</span>p<span class="string">'.encode('</span>gb18030<span class="string">'))</span></span><br><span class="line"><span class="string">Out[78]: 1</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">In [84]: len('</span>p<span class="string">'.encode('</span>big5<span class="string">'))</span></span><br><span class="line"><span class="string">Out[84]: 1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string"># 通过下面这个例子我们可以知道对于汉字,使用gb18030,big5编码占用2个字节,而utf-8则占用3个字节.</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">In [101]: len('</span>我<span class="string">'.encode('</span>gb18030<span class="string">'))</span></span><br><span class="line"><span class="string">Out[101]: 2</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In [102]: len('</span>我<span class="string">'.encode('</span>big5<span class="string">'))</span></span><br><span class="line"><span class="string">Out[102]: 2</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">In [103]: len('</span>我<span class="string">'.encode('</span>utf<span class="number">-8</span><span class="string">'))</span></span><br><span class="line"><span class="string">Out[103]: 3</span></span><br></pre></td></tr></table></figure><ul><li><p>使用gb18030编码汉字’之禪’得到bytes类型数据 b’\xd6\xae\xb6U’ ,使用big5解码不会抛异常,但解码结果不是我们想要的,因为在big5中b’\xd6\xae\xb6U’对应的解码就是’眳貸’ ,如何证明这个结论,可以使用big5对这两个字进行编码转换成bytes类型数据,查看结果对比即可.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">104</span>]: str = <span class="string">'眳貸'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">105</span>]: str.encode(<span class="string">'big5'</span>)</span><br><span class="line">Out[<span class="number">105</span>]: <span class="string">b'\xd6\xae\xb6U'</span></span><br></pre></td></tr></table></figure></li></ul><ul><li>而使用utf-8解码直接抛出异常,这是因为,b’\xd6\xae\xb6U’在’utf-8’中不是有效的utf-8字符串,因此抛出UnicodeDecodeError</li></ul><ul><li><p>添加参数对无法编解码的数据添加预处理措施,防止程序因为遇到无法编解码的数据时,直接抛异常.</p><p>原来使用gb2312对’python之禪’这段字符编码会抛出异常,添加errors参数后会将无法编码的数据替换成?号这样就会知道数据损坏了.</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">107</span>]: str = <span class="string">'python之禪'</span>.encode(<span class="string">'gb2312'</span>,errors=<span class="string">'replace'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">108</span>]: str</span><br><span class="line">Out[<span class="number">108</span>]: <span class="string">b'python\xd6\xae?'</span></span><br><span class="line">     </span><br><span class="line">-------------------------------------------------------------------</span><br><span class="line"><span class="comment"># 原来直接使用utf-8对gb18030编码的数据进行解码会直接抛:UnicodeDecodeError现在会使用乱码替换无法解码的部分数据.</span></span><br><span class="line">In [<span class="number">113</span>]: str = <span class="string">'python之禪'</span>.encode(<span class="string">'gb18030'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">114</span>]: str</span><br><span class="line">Out[<span class="number">114</span>]: <span class="string">b'python\xd6\xae\xb6U'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">115</span>]: str.decode(<span class="string">'utf-8'</span>,errors=<span class="string">'replace'</span>)</span><br><span class="line">Out[<span class="number">115</span>]: <span class="string">'python֮�U'</span></span><br></pre></td></tr></table></figure><p>最后总结,编解码时对于数据涉较多语言时应该使用utf-8进行编解码,解码时如过已知编码使用的是某种类型编码方式编码的,就直接使用该编码进行解码是最好的,但如果不确定,则可以优先尝试utf-8.</p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用vps搭建shadowsocks</title>
      <link href="/2019/09/22/vps&amp;ss/"/>
      <url>/2019/09/22/vps&amp;ss/</url>
      
        <content type="html"><![CDATA[<hr><ul><li>安装准备/说明.<ul><li>需要购买 vps一台</li><li>系统建议使用 Debian   GNU/Linux ,如果你比较熟悉其它Linux发行版如CentOS 也可以使用你熟悉的发型版.</li></ul></li></ul><ul><li>连接远程的vps主机</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Linux/macOS用户使用 ssh命令直接连接你的vps主机,命令示例:</span></span><br><span class="line">ssh -p 端口号 用户名@IP地址    # ssh命令格式</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 此示例为主机默认端口为22的示例</span></span><br><span class="line">ssh  root@100.100.100.1       # 100.100.100.1 是你远程主机的IP地址.</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 非默认端口为22,假设你的vps主机端口号为10087,IP为100.100.100.1.</span></span><br><span class="line">ssh -p 10087 root@100.100.100.1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Windows 10 最新版已经内置了ssh,也可以直接使用ssh命令,但我建议安装:MobaXterm进行连接.</span></span><br><span class="line">MobaXterm官方网址:  https://mobaxterm.mobatek.net/</span><br></pre></td></tr></table></figure><ul><li>安装 shadowsocks</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">配置源文件</span><br><span class="line">nano /etc/apt/sources.list</span><br><span class="line">deb http://ftp.debian.org/debian buster-backports main</span><br><span class="line">apt update</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装</span></span><br><span class="line">apt -t buster-backports install shadowsocks-libev</span><br></pre></td></tr></table></figure><ul><li>开启bbr/开启TCP Fast Open</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 开启bbr</span></span><br><span class="line">echo "net.core.default_qdisc=fq" &gt;&gt; /etc/sysctl.conf</span><br><span class="line">echo "net.ipv4.tcp_congestion_control=bbr" &gt;&gt; /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 开启TCP Fast Open </span></span><br><span class="line">echo "net.ipv4.tcp_fastopen = 3" &gt;&gt; /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line">sysctl -p</span><br></pre></td></tr></table></figure><ul><li>配置shadowsocks config 文件</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 配置参数</span><br><span class="line"># "server":"10.10.344.1"  ip 替换为你vps的ip.</span><br><span class="line"># server_port 443     端口号成任意端口号,但需小于65535.</span><br><span class="line"># "password":"pwd"     pwd 改成你希望的密码</span><br><span class="line"># "method":"chacha20-ietf-poly1305"         加密算法应该使用AEAD加密算法如下:</span><br><span class="line">xchacha20-ietf-poly1305</span><br><span class="line">                                            chacha20-ietf-poly1305</span><br><span class="line">                                            aes-256-gcm</span><br><span class="line">                                            aes-192-gcm</span><br><span class="line">                                            aes-128-gcm</span><br><span class="line"># 修改配置</span><br><span class="line">nano /etc/shadowsocks-libev/config.json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"server"</span>:<span class="string">"10.10.10.1"</span>,</span><br><span class="line">    <span class="attr">"mode"</span>:<span class="string">"tcp_and_udp"</span>,</span><br><span class="line">    <span class="attr">"server_port"</span>:<span class="number">443</span>,</span><br><span class="line">    <span class="attr">"local_port"</span>:<span class="number">1080</span>,</span><br><span class="line">    <span class="attr">"password"</span>:<span class="string">"pwd"</span>,</span><br><span class="line">    <span class="attr">"timeout"</span>:<span class="number">60</span>,</span><br><span class="line">    <span class="attr">"method"</span>:<span class="string">"chacha20-ietf-poly1305"</span>,</span><br><span class="line">    <span class="attr">"fast_open"</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>重启shadowsocks</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 重启 shadowsocks</span></span><br><span class="line">sudo systemctl restart shadowsocks-libev</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看状态</span></span><br><span class="line">systemctl status shadowsocks-libev</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置开机启动</span></span><br><span class="line">systemctl enable shadowsocks-libev</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看bbr</span></span><br><span class="line">lsmod | grep bbr  </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 开启成功效果如下</span></span><br><span class="line">tcp_bbr                20480  29</span><br></pre></td></tr></table></figure><ul><li><p>shadowsocks客户端安装</p><p>所有的客户端配置相差不大,只需要填写几项必填参数</p><p>server,server_port,password,method 填写与服务器保持一至,其它参数无需修改,这里以Windows客户做示例:</p></li></ul><p>  <img src="https://raw.githubusercontent.com/benxin/photo/master/img/%2020190922125338.png" alt="示例图片"></p><p>  <a href="https://github.com/shadowsocks/shadowsocks-windows/releases" target="_blank" rel="noopener">Windows</a></p><p>  <a href="https://github.com/shadowsocks/shadowsocks-android/releases" target="_blank" rel="noopener">Android</a></p><p>  <a href="https://github.com/shadowsocks/ShadowsocksX-NG/releases" target="_blank" rel="noopener">macOS</a> </p><p>  <a href="https://apps.apple.com/us/app/shadowrocket/id932747118" target="_blank" rel="noopener">iPhone</a>      iPhone客户端shadowrocket是收费软件,并且需要一个非中国区apple账户才能安装.</p><p>  Linux <code>sudo apt install shadowsocks-qt5</code> </p>]]></content>
      
      
      <categories>
          
          <category> shadowsocks </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vps </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flask-SQLAlchemy连接MySQL报错处理.(Python3)</title>
      <link href="/2019/08/18/Flask-SQLAlchemy%20connection-mysql/"/>
      <url>/2019/08/18/Flask-SQLAlchemy%20connection-mysql/</url>
      
        <content type="html"><![CDATA[<h4 id="Python3-Flask-SQLAlchemy连接-MySQL报错”no-module-named-‘mysqldb’-“"><a href="#Python3-Flask-SQLAlchemy连接-MySQL报错”no-module-named-‘mysqldb’-“" class="headerlink" title="Python3  Flask-SQLAlchemy连接 MySQL报错”no module named ‘mysqldb’ “"></a>Python3  Flask-SQLAlchemy连接 MySQL报错”no module named ‘mysqldb’ “</h4><ol><li><p>错误信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 没有名为mysqldb的模块</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 在python2的时候连接驱动模块是: MySQL-python,在python3中使用的是mysqlclient它是MySQL-python的一个分支,增加了对Python3的支持,及修复了错误. </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 原因是没有正确的安装连接MySQL的驱动</span></span><br><span class="line">modulenotfounderror no module named 'mysqldb'</span><br></pre></td></tr></table></figure></li></ol><ol start="2"><li><p>解决方法</p><p>stackoverflow 上开发者提供的方法:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 将<span class="built_in">pwd</span>替换成你的数据库密码</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将dbname替换成你要连接的数据库</span></span><br><span class="line">SQLALCHEMY_DATABASE_URI = "mysql+pymysql://root:pwd@localhost/dbname"</span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果你还没有在你的虚拟环境中安装PyMySQL使用以下命令安装</span></span><br><span class="line">python3 -m pip install PyMySQL</span><br></pre></td></tr></table></figure><p>Python官方文档提供的解决方法: </p><blockquote><p>Python  <a href="https://wiki.python.org/moin/MySQL" target="_blank" rel="noopener">官方文档</a></p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python3-dev</span><br><span class="line">pip install mysqlclient</span><br><span class="line"></span><br><span class="line">SQLALCHEMY_DATABASE_URI = "mysql://root:pwd@localhost/dbname"</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flask-SQLAlchemy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git常用命令</title>
      <link href="/2019/08/18/use-get/"/>
      <url>/2019/08/18/use-get/</url>
      
        <content type="html"><![CDATA[<h2 id="Git常用操作命令-备忘"><a href="#Git常用操作命令-备忘" class="headerlink" title="Git常用操作命令(备忘)"></a>Git常用操作命令(备忘)</h2><p>git是一个分布式版本控制软件，最初由林纳斯·托瓦兹创作，于2005年以GPL发布。最初目的是为更好地管理Linux内核开发而设计,如今它成为程序员必不可少的一项工具,它能够帮助你更好的管理你的项目代码,接下来就看下git一些基本操作命令.</p><h4 id="首次使用设置"><a href="#首次使用设置" class="headerlink" title="首次使用设置"></a>首次使用设置</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装git</span></span><br><span class="line">sudo apt install git -y</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 个人信息设置  </span></span><br><span class="line">git config --global user.name "用户名"</span><br><span class="line">git config --global user.email abc@example.com</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看配置信息</span></span><br><span class="line">git config --list</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 手动编辑配置文件</span></span><br><span class="line">nano ~/.gitconfig</span><br></pre></td></tr></table></figure><h4 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h4><ol><li><p>克隆一个仓库</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone url</span><br></pre></td></tr></table></figure></li></ol><ol start="2"><li><p>_初始化本地仓库</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure></li><li><p>检查文件状态</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">touch README.md</span><br><span class="line"></span><br><span class="line">git status</span><br></pre></td></tr></table></figure></li></ol><ol start="4"><li><p>跟踪文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 将 README.md提交到暂存区</span></span><br><span class="line">git add README.md</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将所有文件提交到暂存区</span></span><br><span class="line">git add -A  或者 git add .</span><br><span class="line"></span><br><span class="line">git status</span><br><span class="line"><span class="meta">#</span><span class="bash"> 取消将README.md提交到暂存区</span></span><br><span class="line"></span><br><span class="line">git rm --cached README.md</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果需要取消所有的暂存区文件使用</span></span><br><span class="line"></span><br><span class="line">git rm --cached *</span><br></pre></td></tr></table></figure></li><li><p>提交更新</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">echo "hello git" &gt;&gt; README.md</span><br><span class="line"></span><br><span class="line">git commit -m '本次提交更新的内容描述'</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 跳过暂存区直接提交更新</span></span><br><span class="line">git commit -a -m '本次提交更新的内容描述'</span><br></pre></td></tr></table></figure></li><li><p>查看提交历史</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br><span class="line"></span><br><span class="line">git log --stat</span><br></pre></td></tr></table></figure></li><li><p>取消暂存的文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset HEAD README.md</span><br></pre></td></tr></table></figure></li><li><p>撤销对文件的修改</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 将hello git 追加到README.md文件中</span></span><br><span class="line">echo "hello git " &gt;&gt; README.md</span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果想要撤销对README.md 文件的修改,执行以下命令 [将工作区代码撤销至上次修改]</span></span><br><span class="line">git checkout -- README.md</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将暂存区代码撤销至工作区</span></span><br><span class="line">git reset HEAD  文件名</span><br></pre></td></tr></table></figure></li><li><p>版本回退</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 回退到上一个版本</span></span><br><span class="line">git reset --hard HEAD^</span><br><span class="line"><span class="meta">#</span><span class="bash"> 回退到倒数第2个版本</span></span><br><span class="line">git reset --hard HEAD~2</span><br><span class="line"><span class="meta">#</span><span class="bash"> 回退到之前n个版本 n指某一个数字</span></span><br><span class="line">git reset --hard HEAD~n</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 根据版本号回退到指定的版本</span></span><br><span class="line">git reflog</span><br><span class="line"><span class="meta">#</span><span class="bash"> 03a673d 是你要回退的到的某个版本号</span></span><br><span class="line">git reset --hard 03a673d</span><br></pre></td></tr></table></figure></li><li><p>删除文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git rm 文件名</span><br><span class="line"><span class="meta">#</span><span class="bash"> 强制删除</span></span><br><span class="line">git rm -f 文件名</span><br></pre></td></tr></table></figure></li></ol><h4 id="远程仓库使用"><a href="#远程仓库使用" class="headerlink" title="远程仓库使用"></a>远程仓库使用</h4><ol><li><p>创建远程 GitHub仓库</p><p>注册GitHub –&gt;  进入个人仓库主页,点击右上角铃铛旁边的加号 –&gt; 点击 New repository 开始创建仓库.</p><p><img src="https://raw.githubusercontent.com/benxin/photo/master/img/%2020190818013115.png" alt></p></li><li><p>仓库初始操作</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd ~/test</span><br><span class="line">git init </span><br><span class="line">git add README.md</span><br><span class="line">git commit -m "first commit"</span><br><span class="line"></span><br><span class="line">git remote add origin 仓库url</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure></li><li><p>同步远程仓库</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">echo "hello python" &gt;&gt; hello.py</span><br><span class="line"></span><br><span class="line">git commit -a -m "add hello python"</span><br><span class="line"><span class="meta">#</span><span class="bash"> 将本地的更新操作推送到远程仓库</span></span><br><span class="line">git push   </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 从远程仓库拉取代码到本地</span></span><br><span class="line">git pull</span><br></pre></td></tr></table></figure></li><li><p>分支操作</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 创建了一名为dev的分支</span></span><br><span class="line">git branch dev</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看分支</span></span><br><span class="line">git branch   </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 切换分支 [从master分支切换至dev分支]</span></span><br><span class="line">git checkout dev </span><br><span class="line"></span><br><span class="line">echo "create dev branch" &gt;&gt; README.md</span><br><span class="line"></span><br><span class="line">git commit -a -m "创建开发分支"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将更新推送到远程仓库的dev分支</span></span><br><span class="line">git push --set-upstream origin dev</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建并切换至<span class="built_in">test</span> 分支</span></span><br><span class="line">git checkout -b test </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除分支 </span></span><br><span class="line">git branch -d dev</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 强制删除</span></span><br><span class="line">git branch -D dev</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 合并代码 </span></span><br><span class="line">git checkout master </span><br><span class="line"><span class="meta">#</span><span class="bash"> 将dev分支合并至master分支</span></span><br><span class="line">git merge dev</span><br></pre></td></tr></table></figure></li><li><p>代码冲突</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dev 分支 hello.py文件</span></span><br><span class="line">cat hello.py</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">say_hello</span><span class="params">()</span>:</span></span><br><span class="line">print(<span class="string">"i like coding"</span>)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment"># master分支 hello.py 文件</span></span><br><span class="line">cat hello.py</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">say_hello</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 代码冲突信息</span></span><br><span class="line"></span><br><span class="line">git merge dev</span><br><span class="line">自动合并 hello.py</span><br><span class="line">冲突（添加/添加）：合并冲突于 hello.py</span><br><span class="line">自动合并失败，修正冲突然后提交修正的结果。</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看并非解决冲突信息</span></span><br><span class="line">git mergetool</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/benxin/photo/master/img/%2020190818034709.png" alt></p></li><li><p>重新推送代码到<code>GitHub</code>仓库</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git commit -a -m 'update hello.py'</span><br><span class="line"></span><br><span class="line">git merge dev</span><br></pre></td></tr></table></figure></li></ol><ol start="7"><li><p>给分支添加标签</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 添加标签 &lt;v1.0&gt; 标签名 <span class="string">'version 1.0'</span> 标签描述</span></span><br><span class="line">git tag -a v1.0 -m 'version 1.0'</span><br><span class="line"><span class="meta">#</span><span class="bash"> 将标签推送到GitHub仓库</span></span><br><span class="line">git push origin v1.0</span><br></pre></td></tr></table></figure></li><li><p>移除标签</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git tag -d 标签名</span><br><span class="line">git tag -d v1.0</span><br><span class="line"><span class="meta">#</span><span class="bash"> 移除远程GitHub仓库标签</span></span><br><span class="line">git push origin --delete tag 标签名</span><br><span class="line">git push origin --delete tag v1.0</span><br></pre></td></tr></table></figure></li></ol><h4 id="git-设置别名"><a href="#git-设置别名" class="headerlink" title="git 设置别名"></a>git 设置别名</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 编辑gitconfig 配置文件添加别名</span></span><br><span class="line">vi ~/.gitconfig</span><br><span class="line"></span><br><span class="line">[alias]</span><br><span class="line">     dog = log --all --decorate --oneline --graph</span><br><span class="line">     st = status</span><br><span class="line">     co = checkout</span><br><span class="line">     br = branch</span><br><span class="line">     ci = commit -a -v</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux/Debian/Ubuntu,安装Google chrome</title>
      <link href="/2019/08/11/LinuxDebianUbuntu,%E5%AE%89%E8%A3%85Google-chrome/"/>
      <url>/2019/08/11/LinuxDebianUbuntu,%E5%AE%89%E8%A3%85Google-chrome/</url>
      
        <content type="html"><![CDATA[<h2 id="Linux-Debian-Ubuntu-安装Google-chrome浏览器的方式"><a href="#Linux-Debian-Ubuntu-安装Google-chrome浏览器的方式" class="headerlink" title="Linux/Debian/Ubuntu,安装Google chrome浏览器的方式."></a>Linux/Debian/Ubuntu,安装Google chrome浏览器的方式.</h2><p>chrome是一款非常好用的浏览器,近期更新至了chrome76.+的版本,将域名前缀部分的HTTP和www做了隐藏,让用户更加专注于域名本身 ,一直以来在Windows平台安装chrome一般都是下载.exe的安装包直接安装,Linux平台也有小伙伴们喜欢下载好.deb的包安装,可是这么安装有一个缺陷那就是无法收到更新,每次有新版本都需要手动安装.比较麻烦,下面来看下其它的安装方式.</p><ul><li><p>安装Linux包签名密钥</p></li><li><p>Debian, Ubuntu</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -q -O - https://dl.google.com/linux/linux_signing_key.pub | sudo apt-key add -</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>Fedora, SUSE, Mandriva, RHEL,</p>  <figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget <span class="string">https:</span><span class="comment">//dl.google.com/linux/linux_signing_key.pub</span></span><br><span class="line">sudo rpm --<span class="keyword">import</span> linux_signing_key.pub</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>配置镜像源</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo sh -c 'echo "deb http://dl.google.com/linux/chrome/deb/ stable main" &gt;&gt; /etc/apt/sources.list.d/google.list</span><br><span class="line"></span><br><span class="line">sudo apt update</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>安装chrome(推荐)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 稳定版/公测版</span></span><br><span class="line">sudo apt install google-chrome-stable -y</span><br><span class="line"></span><br><span class="line">sudo apt install google-chrome-beta -y</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>使用deb包的安装方式(不推荐)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb</span><br><span class="line"></span><br><span class="line">sudo dpkg -i ./google-chrome * .deb</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> Google </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Chrome </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>介绍一款Linux 平台好用的开源截图工具 Flameshot</title>
      <link href="/2019/08/11/Flameshot/"/>
      <url>/2019/08/11/Flameshot/</url>
      
        <content type="html"><![CDATA[<h3 id="Flameshot"><a href="#Flameshot" class="headerlink" title="Flameshot"></a>Flameshot</h3><p>Flameshot 是我目前在Linux使用体验感觉最好的一款截图工具,并且它开源(开源协议GPL-3.0) GitHub仓库:<a href="https://github.com/lupoDharkael/flameshot" target="_blank" rel="noopener">Flameshot</a> 感觉不错可以去点个赞.</p><p>记得当初在刚切换到Linux平台的时候,用的是自带shutter截图使用起来特别不方便,用户体验特别糟糕.</p><p>后来在Google search 的帮助下我找到了Flameshot 这款截图软件.当时我使用的是Debian 9（Stretch）那时候没有安装包只能编译安装,期间也是遇到各种坑爹的依赖问题,好的接下来看下现在怎么安装这款截图工具.</p><h4 id="安装-Flameshot"><a href="#安装-Flameshot" class="headerlink" title="安装 Flameshot"></a>安装 Flameshot</h4><ul><li><p><a href="https://tracker.debian.org/pkg/flameshot" target="_blank" rel="noopener">Debian 10+</a>：<code>apt install flameshot</code></p></li><li><p><a href="https://launchpad.net/ubuntu/+source/flameshot" target="_blank" rel="noopener">Ubuntu 18.04+</a>：<code>apt install flameshot</code></p></li></ul><h4 id="解绑-shutter"><a href="#解绑-shutter" class="headerlink" title="解绑 shutter"></a>解绑 shutter</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 释放默认绑定的截图工具shutter所占用的快捷键 </span></span><br><span class="line">gsettings set org.gnome.settings-daemon.plugins.media-keys screenshot ''</span><br></pre></td></tr></table></figure><h4 id="给-Flameshot-设置快捷键"><a href="#给-Flameshot-设置快捷键" class="headerlink" title="给 Flameshot 设置快捷键"></a>给 Flameshot 设置快捷键</h4><blockquote><p>设置 —-&gt; 设备  —-&gt;   keyboard  —-&gt;  鼠标移动菜单至底部点击 +号添加自定义快捷键. </p></blockquote><blockquote><p>在名称栏目填写: flameshot    在命令栏目填写: flameshot gui  </p><p>在快捷键栏目填写: 一个自己喜欢的启动截图工具按键(通常为:Prt Sc  按键)</p></blockquote><p>如下图:</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/benxin/photo/master/img/%2020190811060323.png" alt="set" title>                </div>                <div class="image-caption">set</div>            </figure><h4 id="给-Flameshot-设置快捷启动命令"><a href="#给-Flameshot-设置快捷启动命令" class="headerlink" title="给 Flameshot 设置快捷启动命令."></a>给 Flameshot 设置快捷启动命令.</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 使用默认的shell用户</span></span><br><span class="line">sudo echo "alias ft='flameshot gui'" &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="meta">#</span><span class="bash"> 重载配置文件</span></span><br><span class="line">source ~/.bashrc  </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 使用zsh用户</span></span><br><span class="line">sudo echo "alias ft='flameshot gui'" &gt;&gt; ~/.zshrc</span><br><span class="line"><span class="meta">#</span><span class="bash"> 重载配置文件</span></span><br><span class="line">source ~/.zshrc</span><br></pre></td></tr></table></figure><p>接下来就可以在终端使用ft命令启动flameshot进行截图。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/benxin/photo/master/img/%2020190811064142.png" alt="photo" title>                </div>                <div class="image-caption">photo</div>            </figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flameshot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debian 登录后成功,却看不到桌面解决方法.</title>
      <link href="/2019/08/06/Debian-desktop-error/"/>
      <url>/2019/08/06/Debian-desktop-error/</url>
      
        <content type="html"><![CDATA[<h1 id="Debian-登录后成功-却看不到桌面解决方法"><a href="#Debian-登录后成功-却看不到桌面解决方法" class="headerlink" title="Debian 登录后成功,却看不到桌面解决方法."></a>Debian 登录后成功,却看不到桌面解决方法.</h1><h5 id="事件可能原因"><a href="#事件可能原因" class="headerlink" title="事件可能原因?"></a>事件可能原因?</h5><p>今天上重启了系统之后,和以往一样正常登录操作系统,输入密码登录成功!却发现桌面除了背景图片什么也看不到,也无法使用terminal,这时候先想到了万能的重启,好的重启试试,再次登录发现问题依旧,如是我在想最近执行了什么操作,思考了一会想起,好像昨天执行了卸载gnome-shell相关的操作.在想这能是与这个有关.好了废话不多说,下面看下解决方法.</p><ol><li><p>解决方法.</p><p>  重启系统让画面停留在登陆界面,如下图:</p></li></ol><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/benxin/image_depot/master/img/%2020190806111651.png" alt="Debian-login" title>                </div>                <div class="image-caption">Debian-login</div>            </figure><ol start="2"><li>登录GUI控制台,使用快捷键 : CTRL+alt+f2 看到如下界面.</li></ol><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/benxin/image_depot/master/img/%2020190806112659.png" alt="login" title>                </div>                <div class="image-caption">login</div>            </figure><ol start="3"><li>在此界面使用你的账户密码进行登录,成功登录如下图:</li></ol><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/benxin/image_depot/master/img/%2020190806113111.png" alt="Debian-gui" title>                </div>                <div class="image-caption">Debian-gui</div>            </figure><ol start="4"><li>卸载重装gnome</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 卸载</span></span><br><span class="line">sudo apt-get autoremove gdm3</span><br><span class="line">sudo apt-get autoremove --purge gnome*</span><br><span class="line"><span class="meta">#</span><span class="bash"> 重启</span></span><br><span class="line">sudo shutdown -r now   #或者使用  sudo reboot   </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重启后登录系统,重新安装gnome</span></span><br><span class="line">sudo apt install gnome</span><br><span class="line">apt-get install task-gnome-desktop</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Debian </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用PyMySQL库连接MySQL数据库实现增删改查</title>
      <link href="/2019/08/05/PyMySQL-action/"/>
      <url>/2019/08/05/PyMySQL-action/</url>
      
        <content type="html"><![CDATA[<h1 id="使用PyMySQL库连接MySQL数据库实现增删改查"><a href="#使用PyMySQL库连接MySQL数据库实现增删改查" class="headerlink" title="使用PyMySQL库连接MySQL数据库实现增删改查"></a>使用PyMySQL库连接MySQL数据库实现增删改查</h1><ol><li><p>先决条件数据库版本要求</p><ul><li>MySQL &gt;= 5.5</li><li>MariaDB &gt;= 5.5</li></ul></li><li><p>安装PyMySQL</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m pip install PyMySQL</span><br></pre></td></tr></table></figure></li></ol><ol start="3"><li><p>部分参数说明</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># PyMySQL 相关参数</span></span><br><span class="line"><span class="comment"># 连接数据库</span></span><br><span class="line">host <span class="comment"># 服务器ip</span></span><br><span class="line">user <span class="comment"># 数据库用户名</span></span><br><span class="line">password <span class="comment"># 数据库密码</span></span><br><span class="line">db  <span class="comment"># 连接的数据</span></span><br><span class="line">charset  <span class="comment"># 数据库通信使用的字符集</span></span><br><span class="line">cursors.DictCursor <span class="comment"># 将结果作为字典类型数据返回的游标 </span></span><br><span class="line"><span class="comment"># Python字典是散列表的实现,在平均情况下查找,增加和删除时间复杂度为O(1)</span></span><br><span class="line">connection = pymysql.connect(host=<span class="string">'localhost'</span>,</span><br><span class="line">                             user=<span class="string">'user'</span>,</span><br><span class="line">                             password=<span class="string">'passwd'</span>,</span><br><span class="line">                             db=<span class="string">'db'</span>,</span><br><span class="line">                             charset=<span class="string">'utf8'</span>,</span><br><span class="line">                             cursorclass=pymysql.cursors.DictCursor)</span><br><span class="line"><span class="comment"># 创建游标</span></span><br><span class="line">cursor = db.cursor()</span><br><span class="line"><span class="comment"># 关闭游标</span></span><br><span class="line">cursor.close()</span><br><span class="line"><span class="comment"># 执行sql语句</span></span><br><span class="line">cursor.execute(sql)</span><br><span class="line"><span class="comment"># 提交数据到数据库</span></span><br><span class="line">db.commit()</span><br><span class="line"><span class="comment"># 回滚操作</span></span><br><span class="line">db.rollback()</span><br></pre></td></tr></table></figure></li><li><p>demo</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 _*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">@Author: benxin</span></span><br><span class="line"><span class="string">@File:   sql_demo.py</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pymysql <span class="keyword">import</span> connect, cursors</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SqlAction</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">'''数据库曾删改查'''</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.connection = connect(host=<span class="string">'localhost'</span>,</span><br><span class="line">                                  user=<span class="string">'root'</span>,</span><br><span class="line">                                  password=<span class="string">'pwd'</span>,</span><br><span class="line">                                  db=<span class="string">'db01'</span>,</span><br><span class="line">                                  charset=<span class="string">'utf8mb4'</span>,</span><br><span class="line">                                  cursorclass=cursors.DictCursor)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">query_data</span><span class="params">(self, query)</span>:</span></span><br><span class="line">        <span class="comment"># 查询数据</span></span><br><span class="line">        <span class="keyword">if</span> query:</span><br><span class="line">            <span class="keyword">with</span> self.connection.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">                sql = query</span><br><span class="line">                cursor.execute(sql)</span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    self.connection.commit()</span><br><span class="line">                <span class="keyword">except</span>:</span><br><span class="line">                    self.connection.rollback()</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="comment"># 查询单条</span></span><br><span class="line">                    <span class="comment"># result = cursor.fetchone()</span></span><br><span class="line">                    <span class="comment"># 查询多条数据</span></span><br><span class="line">                    result = cursor.fetchall()</span><br><span class="line">                    <span class="keyword">for</span> row <span class="keyword">in</span> result:</span><br><span class="line">                        <span class="keyword">if</span> row:</span><br><span class="line">                            print(row[<span class="string">'name'</span>], row[<span class="string">'age'</span>], row[<span class="string">'gender'</span>])</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">insert_data</span><span class="params">(self, insert)</span>:</span></span><br><span class="line">        <span class="comment"># 插入数据</span></span><br><span class="line">        <span class="keyword">if</span> insert:</span><br><span class="line"></span><br><span class="line">            <span class="keyword">with</span> self.connection.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">                sql = insert</span><br><span class="line">                cursor.execute(sql)</span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    self.connection.commit()</span><br><span class="line">                <span class="keyword">except</span>:</span><br><span class="line">                    self.connection.rollback()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update_data</span><span class="params">(self, update)</span>:</span></span><br><span class="line">        <span class="comment"># 更新数据</span></span><br><span class="line">        <span class="keyword">if</span> update:</span><br><span class="line">            <span class="keyword">with</span> self.connection.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">                sql = update</span><br><span class="line">                cursor.execute(sql)</span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    self.connection.commit()</span><br><span class="line">                <span class="keyword">except</span>:</span><br><span class="line"></span><br><span class="line">                    self.connection.rollback()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">delete_data</span><span class="params">(self, delete)</span>:</span></span><br><span class="line">        <span class="comment"># 删除数据</span></span><br><span class="line">        <span class="keyword">if</span> delete:</span><br><span class="line">            <span class="keyword">with</span> self.connection.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">                sql = delete</span><br><span class="line">                cursor.execute(sql)</span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    self.connection.commit()</span><br><span class="line">                <span class="keyword">except</span>:</span><br><span class="line">                    self.connection.rollback()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">close</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># 关闭连接</span></span><br><span class="line">        self.connection.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">()</span>:</span></span><br><span class="line">    query = <span class="string">"select * from students;"</span></span><br><span class="line">    insert = <span class="string">"insert into students (id,name,age,height,address) values(0,'郭靖',27,178.00,'蒙古');"</span></span><br><span class="line">    update = <span class="string">"update students set  height=181.00 where name like '_靖';"</span></span><br><span class="line">    delete = <span class="string">"delete from students where name like '%靖';"</span></span><br><span class="line">    mysql = SqlAction()</span><br><span class="line">    mysql.query_data(query)</span><br><span class="line">    <span class="comment"># mysql.insert_data(insert)</span></span><br><span class="line">    <span class="comment"># mysql.update_data(update)</span></span><br><span class="line">    <span class="comment"># mysql.delete_data(delete)</span></span><br><span class="line">    mysql.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">run()</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PyMySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL主从配置(适用于MySQL 8.0+)</title>
      <link href="/2019/08/05/MySQL%20Master-Slave/"/>
      <url>/2019/08/05/MySQL%20Master-Slave/</url>
      
        <content type="html"><![CDATA[<h1 id="MySQL主从配置-适用于MySQL-8-0"><a href="#MySQL主从配置-适用于MySQL-8-0" class="headerlink" title="MySQL主从配置(适用于MySQL 8.0+)"></a>MySQL主从配置(适用于MySQL 8.0+)</h1><p>本文主要记录mysql 的主从配置,文末提供一分MySQL数据库管理思维导图.</p><ol><li><h5 id="配置主服务器"><a href="#配置主服务器" class="headerlink" title="配置主服务器"></a>配置主服务器</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">主MySQL Server: 10.0.0.3</span><br><span class="line">从MySQL Server: 10.0.0.4</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 编辑主服务器配置文件</span></span><br><span class="line">sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf</span><br></pre></td></tr></table></figure><ul><li><p>将以下配置信息粘贴至mysqld.cnf 文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bind</span>-address= 10.0.0.3</span><br><span class="line">server-id= 1</span><br><span class="line">log_bin= /var/<span class="built_in">log</span>/mysql/mysql-bin.log</span><br></pre></td></tr></table></figure></li><li><p>重启MySQL服务</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mysql restart</span><br></pre></td></tr></table></figure></li></ul></li></ol><ol start="2"><li><h5 id="创建一个新账户用于连接从服务器"><a href="#创建一个新账户用于连接从服务器" class="headerlink" title="创建一个新账户用于连接从服务器"></a>创建一个新账户用于连接从服务器</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># 创建用户</span></span><br><span class="line"> <span class="keyword">create</span> <span class="keyword">user</span> rpl_user@<span class="number">10.0</span><span class="number">.0</span><span class="number">.4</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'password'</span>;</span><br><span class="line">   </span><br><span class="line"><span class="comment"># 授权用户</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">replication</span> <span class="keyword">slave</span> <span class="keyword">on</span> *.* <span class="keyword">to</span> rpl_user@<span class="number">10.0</span><span class="number">.0</span><span class="number">.4</span>;</span><br><span class="line">   </span><br><span class="line"><span class="comment"># 确认授权</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">grants</span> <span class="keyword">for</span> replica_user@<span class="number">10.0</span><span class="number">.0</span><span class="number">.4</span>;</span><br><span class="line"><span class="comment"># 查看主服务器状态</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">master</span> <span class="keyword">status</span>\G</span><br></pre></td></tr></table></figure></li></ol><ol start="3"><li><h5 id="配置从服务器"><a href="#配置从服务器" class="headerlink" title="配置从服务器"></a>配置从服务器</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑从服务器配置文件</span></span><br><span class="line">sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf</span><br></pre></td></tr></table></figure><ul><li><p>将以下配置信息粘贴至mysqld.cnf 文件.</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">bind-address</span>= <span class="number">10.0</span>.<span class="number">0.4</span></span><br><span class="line"><span class="attr">server-id</span>= <span class="number">2</span></span><br><span class="line"><span class="attr">log_bin</span>= /var/log/mysql/mysql-bin.log</span><br></pre></td></tr></table></figure></li><li><p>重启MySQL服务</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mysql restart</span><br></pre></td></tr></table></figure></li><li><p>登录从服务器</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure></li><li><p>设置从服务器获取主服务器信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> MASTER_LOG_POS 使用命令show master status\G查看的File:mysql-bin.xx 对应填写即可 </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> MASTER_LOG_FILE 使用命令show master status\G查看的Position: xx 对应填写即可 </span></span><br><span class="line">CHANGE MASTER TO MASTER_HOST='10.0.0.3',</span><br><span class="line">MASTER_USER='rpl_user',</span><br><span class="line">MASTER_PASSWORD='password',</span><br><span class="line">MASTER_LOG_FILE='mysql-bin.000002',</span><br><span class="line">MASTER_LOG_POS=155;</span><br></pre></td></tr></table></figure></li><li><p>启动从属线程</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">start</span> <span class="keyword">slave</span>;</span><br></pre></td></tr></table></figure></li><li><p>检查MySQL从服务器状态</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">slave</span> <span class="keyword">status</span>\G</span><br></pre></td></tr></table></figure></li></ul></li><li><h5 id="检查是否配置成功"><a href="#检查是否配置成功" class="headerlink" title="检查是否配置成功"></a>检查是否配置成功</h5><ul><li>登录主MySQL服务器创建一个新数据用来测试</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 登录主MySQL服务器</span></span><br><span class="line">mysql -uroot -p</span><br><span class="line"><span class="comment"># 创建一个新数据库</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> test_db <span class="keyword">charset</span>=<span class="string">'utf8'</span>;</span><br></pre></td></tr></table></figure><ul><li><p>登录从MySQL服务器查看是否产生新数据</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br><span class="line">show databases;</span><br></pre></td></tr></table></figure></li></ul></li></ol><ul><li><h5 id="MySQL数据库管理思维导图"><a href="#MySQL数据库管理思维导图" class="headerlink" title="MySQL数据库管理思维导图"></a>MySQL数据库管理思维导图</h5><blockquote><p>HTML版  <a href="https://github.com/benxin/image_depot/blob/master/MySQL.7z" target="_blank" rel="noopener">download</a></p></blockquote></li></ul><p><img src="https://raw.githubusercontent.com/benxin/image_depot/master/img/%2020190805002916.png" alt="MySQL" title="MySQL数据库账户管理"></p>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debian安装MySQL</title>
      <link href="/2019/08/04/debian%20install%20mysql/"/>
      <url>/2019/08/04/debian%20install%20mysql/</url>
      
        <content type="html"><![CDATA[<h3 id="debian-安装-MySQL"><a href="#debian-安装-MySQL" class="headerlink" title="debian 安装 MySQL"></a>debian 安装 MySQL</h3><ol><li><h6 id="下载MySQL存储库"><a href="#下载MySQL存储库" class="headerlink" title="下载MySQL存储库."></a>下载MySQL存储库.</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://dev.mysql.com/downloads/repo/apt/</span><br><span class="line">wget https://repo.mysql.com//mysql-apt-config_0.8.13-1_all.deb</span><br><span class="line">sudo dpkg -i *.deb</span><br></pre></td></tr></table></figure></li></ol><ol start="2"><li><h6 id="更新源-从MySQL存储库更新包信息"><a href="#更新源-从MySQL存储库更新包信息" class="headerlink" title="更新源,从MySQL存储库更新包信息."></a>更新源,从MySQL存储库更新包信息.</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure></li></ol><ol start="3"><li><h6 id="安装MySQL"><a href="#安装MySQL" class="headerlink" title="安装MySQL."></a>安装MySQL.</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 在线安装</span></span><br><span class="line">sudo apt-get install mysql-server</span><br></pre></td></tr></table></figure><h6 id="离线deb包安装-MySQL-url"><a href="#离线deb包安装-MySQL-url" class="headerlink" title="离线deb包安装  MySQL url"></a>离线deb包安装  <a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">MySQL url</a></h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 选择需要的版本下载完成后,执行以下命令.</span></span><br><span class="line">dpkg -i *.deb</span><br></pre></td></tr></table></figure></li></ol><ol start="4"><li><h6 id="MySQL服务"><a href="#MySQL服务" class="headerlink" title="MySQL服务."></a>MySQL服务.</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"> #</span><span class="bash"> 查看状态(status) | 停止(stop) | 启动(start) | 重启(restart)</span></span><br><span class="line"> sudo service mysql status</span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span><span class="bash"> 也可以这么写</span></span><br><span class="line">sudo systemctl restart mysql</span><br></pre></td></tr></table></figure></li><li><h6 id="安装过程错误处理"><a href="#安装过程错误处理" class="headerlink" title="安装过程错误处理."></a>安装过程错误处理.</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">update-alternatives: 错误: 候选项路径 /etc/mysql/mysql.cnf 不存在</span><br><span class="line">dpkg: 处理软件包 mysql-server-5.7 (--configure)时出错：</span><br><span class="line"> 子进程 已安装 post-installation 脚本 返回错误状态 2</span><br><span class="line">dpkg: 依赖关系问题使得 mysql-server 的配置工作不能继续：</span><br><span class="line"> mysql-server 依赖于 mysql-server-5.7；然而：</span><br><span class="line">  软件包 mysql-server-5.7 尚未配置。</span><br><span class="line"></span><br><span class="line">dpkg: 处理软件包 mysql-server (--configure)时出错：</span><br><span class="line"> 依赖关系问题 - 仍未被配置</span><br><span class="line"></span><br><span class="line">sudo apt-get remove --purge mysql-\*</span><br><span class="line">sudo apt-get install mysql-server mysql-client</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debian简单的防火墙ufw规则设置</title>
      <link href="/2019/08/04/Debian-Firewall/"/>
      <url>/2019/08/04/Debian-Firewall/</url>
      
        <content type="html"><![CDATA[<h1 id="Debian防火墙简单配置"><a href="#Debian防火墙简单配置" class="headerlink" title="Debian防火墙简单配置"></a>Debian防火墙简单配置</h1><ul><li><h6 id="安装简单的防火墙-ufw"><a href="#安装简单的防火墙-ufw" class="headerlink" title="安装简单的防火墙(ufw)"></a>安装简单的防火墙(ufw)</h6><p><code>sudo apt-get install ufw</code></p></li><li><h6 id="防火墙基本规则"><a href="#防火墙基本规则" class="headerlink" title="防火墙基本规则"></a>防火墙基本规则</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 启用</span><br><span class="line">sudo ufw enable  </span><br><span class="line"><span class="meta">#</span> 禁用</span><br><span class="line">sudo ufw disable</span><br><span class="line"><span class="meta">#</span> 重置</span><br><span class="line">sudo ufw reset</span><br><span class="line"><span class="meta">#</span> 重启</span><br><span class="line">sudo ufw reload</span><br></pre></td></tr></table></figure></li><li><h6 id="设置默认规则"><a href="#设置默认规则" class="headerlink" title="设置默认规则"></a>设置默认规则</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw default deny incoming</span><br><span class="line">sudo ufw default allow outgoing</span><br></pre></td></tr></table></figure></li><li><h6 id="查看规则"><a href="#查看规则" class="headerlink" title="查看规则"></a>查看规则</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw status verbose</span><br><span class="line"><span class="comment"># 或者这么写</span></span><br><span class="line">sudo ufw status</span><br><span class="line"></span><br><span class="line">[sudo] benxin 的密码：</span><br><span class="line">Status: active</span><br><span class="line">Logging: on (low)</span><br><span class="line">Default: deny (incoming), allow (outgoing), disabled (routed)</span><br><span class="line">New profiles: skip</span><br><span class="line"></span><br><span class="line">To                         Action      From</span><br><span class="line">--                         ------      ----</span><br><span class="line">22/tcp                     ALLOW IN    Anywhere                  </span><br><span class="line">22                         ALLOW IN    Anywhere                  </span><br><span class="line">80/tcp                     ALLOW IN    Anywhere                  </span><br><span class="line">443/tcp                    ALLOW IN    Anywhere                  </span><br><span class="line">22233                      ALLOW IN    Anywhere                  </span><br><span class="line">22/tcp (v6)                ALLOW IN    Anywhere (v6)             </span><br><span class="line">22 (v6)                    ALLOW IN    Anywhere (v6)             </span><br><span class="line">80/tcp (v6)                ALLOW IN    Anywhere (v6)             </span><br><span class="line">443/tcp (v6)               ALLOW IN    Anywhere (v6)             </span><br><span class="line">22233 (v6)                 ALLOW IN    Anywhere (v6)</span><br></pre></td></tr></table></figure></li></ul><ul><li><h6 id="设置规则-ufw默认禁止所有传入连接-所以需要进行简单的设置"><a href="#设置规则-ufw默认禁止所有传入连接-所以需要进行简单的设置" class="headerlink" title="设置规则,ufw默认禁止所有传入连接,所以需要进行简单的设置."></a>设置规则,ufw默认禁止所有传入连接,所以需要进行简单的设置.</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 开放ssh接入</span></span><br><span class="line">sudo ufw allow ssh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 拒绝ssh服务</span></span><br><span class="line">sudo ufw deny ssh</span><br></pre></td></tr></table></figure></li><li><h6 id="端口访问规则"><a href="#端口访问规则" class="headerlink" title="端口访问规则"></a>端口访问规则</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 允许使用通过tcp传输协议使用1000-2000范围的端口</span></span><br><span class="line">sudo ufw allow 1000:2000/tcp</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 允许使用通过udp传输协议使用1000-2000范围的端口</span></span><br><span class="line">sudo ufw allow 1000:2000/udp</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 允许所有通过80端口使用tcp协议的数据</span></span><br><span class="line">sudo ufw allow 80/tcp</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 拒绝所用使用53端口的数据(tcp/udp)</span></span><br><span class="line">sudo ufw deny 53</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除规则</span></span><br><span class="line">sudo ufw delete allow 80/tcp</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 按协议删除规则</span></span><br><span class="line">sudo ufw delete allow http</span><br></pre></td></tr></table></figure></li><li><h6 id="IP访问规则"><a href="#IP访问规则" class="headerlink" title="IP访问规则"></a>IP访问规则</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 允许的IP地址范围从 10.0.0.22 到 10.0.0.254 </span></span><br><span class="line">sudo ufw allow from 10.0.0.22/24</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 允许22端口</span></span><br><span class="line">sudo ufw allow from 10.0.0.22</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ip+端口限制,允许的IP地址范围从 10.0.0.22 到 10.0.0.254 使用22端口 </span></span><br><span class="line">sudo ufw allow from 10.0.0.22/24 to any port 22</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ip+端口+协议限制, 允许10.0.0.22 通过22端口tcp协议</span></span><br><span class="line">sudo ufw allow from 10.0.0.22 to any port 22 proto tcp</span><br></pre></td></tr></table></figure></li><li><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 拒绝IP 10.0.0.22 访问</span></span><br><span class="line">sudo ufw deny from 10.0.0.22</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 拒绝IP 10.0.0.22 使用22端口访问</span></span><br><span class="line">sudo ufw deny from 10.0.0.22 to any port 22</span><br></pre></td></tr></table></figure></li><li><h6 id="获取帮助信息"><a href="#获取帮助信息" class="headerlink" title="获取帮助信息"></a>获取帮助信息</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man ufw</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ufw </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用命令将Debian 9 更新至最新版本 Debian ‎10 (Buster)</title>
      <link href="/2019/08/03/debian-update/"/>
      <url>/2019/08/03/debian-update/</url>
      
        <content type="html"><![CDATA[<h1 id="Debian-‎10-Buster-7月6号发布当天我就更新了，截至今天都快一个月了，这期间使用都非常稳定，今天就记录下更方式。"><a href="#Debian-‎10-Buster-7月6号发布当天我就更新了，截至今天都快一个月了，这期间使用都非常稳定，今天就记录下更方式。" class="headerlink" title="Debian ‎10 (Buster) 7月6号发布当天我就更新了，截至今天都快一个月了，这期间使用都非常稳定，今天就记录下更方式。"></a>Debian ‎10 (Buster) 7月6号发布当天我就更新了，截至今天都快一个月了，这期间使用都非常稳定，今天就记录下更方式。</h1><ul><li><p>更新镜像文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">sudo -i</span><br><span class="line">nano /etc/apt/sources.list</span><br><span class="line"><span class="comment"># 将以下镜像url粘贴至你的sources.list文件上,或继续使用你之前使用的源.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># debian-official</span></span><br><span class="line">deb http://security.debian.org/  buster/updates main</span><br><span class="line">deb-src http://security.debian.org/  buster/updates main</span><br><span class="line"></span><br><span class="line"><span class="comment"># aws</span></span><br><span class="line">deb http://cdn-aws.deb.debian.org/debian stable main</span><br><span class="line">deb http://cdn-aws.deb.debian.org/debian-security stable/updates main</span><br><span class="line">deb https://deb.debian.org/debian stable main</span><br><span class="line">deb https://deb.debian.org/debian-security stable/updates main</span><br><span class="line"></span><br><span class="line"><span class="comment"># huawei</span></span><br><span class="line">deb https://mirrors.huaweicloud.com/debian/ buster main contrib non-free</span><br><span class="line">deb https://mirrors.huaweicloud.com/debian/ buster-updates main contrib non-free</span><br><span class="line">deb https://mirrors.huaweicloud.com/debian/ buster-backports main contrib non-free</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>继续使用你之前使用Debian源 ,使用以下命令全局替换stretch 至 buster</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">'s/stretch/buster/g'</span> /etc/apt/sources.list</span><br><span class="line">sed -i <span class="string">'s/stretch/buster/g'</span> /etc/apt/sources.list.d/*.list</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>更新</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br></pre></td></tr></table></figure></li><li><p>升级系统</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get upgrade</span><br><span class="line">apt-get dist-upgrade</span><br></pre></td></tr></table></figure></li><li><p>清除系统安装后不需要的软件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt autoremove</span><br><span class="line">apt clean</span><br></pre></td></tr></table></figure></li><li><p>重启系统</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shutdown -r now</span><br><span class="line"><span class="comment"># 重启如果发现桌面没有了, 只剩下一个黑窗口不用慌安装下桌面即可.</span></span><br><span class="line">sudo apt install gnome</span><br></pre></td></tr></table></figure></li><li><p>查看版信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lsb_release -a</span><br><span class="line"><span class="comment"># 使用screenfetch查看更加详细的信息</span></span><br><span class="line">apt install screenfetch</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Debian </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debian&amp;Ubuntu 更新内核</title>
      <link href="/2019/08/03/update-Kernel/"/>
      <url>/2019/08/03/update-Kernel/</url>
      
        <content type="html"><![CDATA[<h1 id="本文介绍如何将Debian内核更新至最新版本"><a href="#本文介绍如何将Debian内核更新至最新版本" class="headerlink" title="本文介绍如何将Debian内核更新至最新版本"></a>本文介绍如何将Debian内核更新至最新版本</h1><ol><li><p>更换国内源</p><p>备份原来的源文件</p><p><code>sudo cp /etc/apt/sources.list  /etc/apt/sources.list.bak</code></p><p>编辑源文件</p><p><code>sudo  nano /etc/apt/sources.list</code></p></li></ol><p>   <a href="https://mirror.tuna.tsinghua.edu.cn/help/debian/" title="tsinghua" target="_blank" rel="noopener">清华大学开源镜像</a>               <a href="https://mirrors.huaweicloud.com/" title="huawei" target="_blank" rel="noopener">华为开源镜像</a> </p><p>   可以根据自己的需求,去以上两个站点查看想要的源,这两个站点的速度都比较快,更新也很及时.</p><p>   也可以直接使用我拷贝好的,Debian的安全更新源这里我使用的是官方和清华的.</p><p>   Ubuntu 可以去以上两站点查看相应的源进行配置,我自己在用Debian因为比较稳定.</p><p>   粘贴以下内容到你的sources.list文件 CTRL+x 保存退出</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># debian-official</span></span><br><span class="line">deb http://security.debian.org/  buster/updates main</span><br><span class="line">deb-src http://security.debian.org/  buster/updates main</span><br><span class="line"></span><br><span class="line"><span class="comment"># huawei</span></span><br><span class="line">deb https://mirrors.huaweicloud.com/debian/ buster main contrib non-free</span><br><span class="line">deb https://mirrors.huaweicloud.com/debian/ buster-updates main contrib non-free</span><br><span class="line">deb https://mirrors.huaweicloud.com/debian/ buster-backports main contrib non-free</span><br><span class="line"></span><br><span class="line"><span class="comment"># tsinghua</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ buster main contrib non-free</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-updates main contrib non-free</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-backports main contrib non-free</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian-security buster/updates main contrib non-free</span><br></pre></td></tr></table></figure><ol start="2"><li><p>更新</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure><p>查看当前内核版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -ra</span><br></pre></td></tr></table></figure><p>查找可更新的内核</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-cache search linux-image | grep amd64</span><br></pre></td></tr></table></figure><p>安装内核</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install -t buster linux-image-amd64</span><br></pre></td></tr></table></figure></li><li><p>更新GRUB的启动菜单配</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo update-grub</span><br><span class="line">sudo shutdown -r now</span><br></pre></td></tr></table></figure></li><li><p>清除旧的内核</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看旧内核</span></span><br><span class="line">sudo dpkg --list <span class="string">'linux-image*'</span>   </span><br><span class="line"><span class="comment"># 将4.xx替换成实际要卸载的版本号, 例如要卸载的是: linux-image-4.19.0-5-amd64 就将4.xx改成4.19</span></span><br><span class="line"></span><br><span class="line">sudo apt-get remove linux-image-4.xx</span><br><span class="line">sudo apt-get autoremove</span><br><span class="line"><span class="comment"># 查看下新版本的内核信息</span></span><br><span class="line">uname -ra</span><br></pre></td></tr></table></figure></li><li><p>开启 bbr</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"net.core.default_qdisc=fq"</span> &gt;&gt; /etc/sysctl.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"net.ipv4.tcp_congestion_control=bbr"</span> &gt;&gt; /etc/sysctl.conf</span><br></pre></td></tr></table></figure><p> 查看效果</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo lsmod | grep bbr   </span><br><span class="line"><span class="comment"># 开启成功效果如下</span></span><br><span class="line">tcp_bbr                20480  29</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kernel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SSH - 远程主机识别已更改，产生错误。</title>
      <link href="/2019/08/01/ssh-keygen-wrong/"/>
      <url>/2019/08/01/ssh-keygen-wrong/</url>
      
        <content type="html"><![CDATA[<h5 id="记录下今天连接vps出现的问题-因为重装系统由CentOS切换到了Debian-但是本地客户端还储存着远程主机之前的公钥信息导致以下错误。"><a href="#记录下今天连接vps出现的问题-因为重装系统由CentOS切换到了Debian-但是本地客户端还储存着远程主机之前的公钥信息导致以下错误。" class="headerlink" title="记录下今天连接vps出现的问题,因为重装系统由CentOS切换到了Debian,但是本地客户端还储存着远程主机之前的公钥信息导致以下错误。"></a>记录下今天连接vps出现的问题,因为重装系统由CentOS切换到了Debian,但是本地客户端还储存着远程主机之前的公钥信息导致以下错误。</h5><h6 id="错误信息：-WARNING-REMOTE-HOST-IDENTIFICATION-HAS-CHANGED-。"><a href="#错误信息：-WARNING-REMOTE-HOST-IDENTIFICATION-HAS-CHANGED-。" class="headerlink" title="错误信息：  WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!   。"></a>错误信息：  WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!   。</h6><h6 id="解决方法，移除本地主机储存的密钥"><a href="#解决方法，移除本地主机储存的密钥" class="headerlink" title="解决方法，移除本地主机储存的密钥"></a>解决方法，移除本地主机储存的密钥</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拷贝密钥到远程计算机调试</span></span><br><span class="line">ssh-copy-id root@ip -p port  -vv</span><br><span class="line">WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!   </span><br><span class="line"></span><br><span class="line"><span class="comment"># 上stackoverflow 说使用这个最简单的方法但问题没有解决。</span></span><br><span class="line"><span class="comment"># &lt;host&gt;  远程计算机名/ip</span></span><br><span class="line">ssh-keygen -R &lt;host&gt;</span><br></pre></td></tr></table></figure><h6 id="移除主机之前的标识信息解决问题！"><a href="#移除主机之前的标识信息解决问题！" class="headerlink" title="移除主机之前的标识信息解决问题！"></a>移除主机之前的标识信息解决问题！</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 暴力解决，移除文件让它重新生成！</span></span><br><span class="line">rm ~/.ssh/known_hosts</span><br><span class="line"><span class="comment"># 也可以这么做，清空文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">''</span> &gt; ~/.ssh/known_hosts</span><br><span class="line">重新上传公钥ok</span><br><span class="line">ssh-copy-id root@ip -p port</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ssh-keygen </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Python和Selenium 模拟豆瓣登录.</title>
      <link href="/2019/08/01/Python+Selenium/"/>
      <url>/2019/08/01/Python+Selenium/</url>
      
        <content type="html"><![CDATA[<ol><li><p>安装ChromeDriver和Selenium</p><h6 id="这里chrome选择-需要根据你所使用的chrome版本下载-比如我用的是74-0-3729-40（正式版本）所以选择74-xxx-版本的-ChromeDriver"><a href="#这里chrome选择-需要根据你所使用的chrome版本下载-比如我用的是74-0-3729-40（正式版本）所以选择74-xxx-版本的-ChromeDriver" class="headerlink" title="这里chrome选择,需要根据你所使用的chrome版本下载 比如我用的是74.0.3729.40（正式版本）所以选择74.xxx 版本的  ChromeDriver."></a>这里chrome选择,需要根据你所使用的chrome版本下载 比如我用的是74.0.3729.40（正式版本）所以选择74.xxx 版本的  ChromeDriver.</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">pip3 install selenium</span><br><span class="line"><span class="meta">#</span><span class="bash"> 这里我用的是官方的下载地址,因为官网404了,如果你没有科学上网,也可以使用阿里的镜像进行下载安装.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果你以具有科学上网环境,也可以从官网下载安装.</span></span><br><span class="line"> sudo vi /etc/wgetrc     # 配置wget使用代理,在配置文件中添加以下四行代码,这样你就可以使用官方的地址安装ChromeDriver.</span><br><span class="line"> </span><br><span class="line">https_proxy = 127.0.0.1:1080</span><br><span class="line">http_proxy = 127.0.0.1:1080</span><br><span class="line">ftp_proxy = 127.0.0.1:1080</span><br><span class="line">use_proxy = on</span><br><span class="line"></span><br><span class="line">wget https://chromedriver.storage.googleapis.com/74.0.3729.6/chromedriver_linux64.zip</span><br><span class="line"><span class="meta">#</span><span class="bash"> 阿里镜像url</span></span><br><span class="line">wget https://npm.taobao.org/mirrors/chromedriver/74.0.3729.6/chromedriver_linux64.zip</span><br><span class="line">unzip chromedriver_linux64.zip     # 如果出现无法定位unzip软件包,安装一下即可.</span><br><span class="line">chmod +x chromedriver         </span><br><span class="line">sudo mv -f chromedriver /usr/local/share/chromedriver      </span><br><span class="line">sudo ln -s /usr/local/share/chromedriver /usr/local/bin/chromedriver</span><br><span class="line">sudo ln -s /usr/local/share/chromedriver /usr/bin/chromedriver</span><br></pre></td></tr></table></figure></li></ol><h5 id="如果你和我用的chrome版本不同，可以根据实际版本选择下载，当然也可直接更新你的Chrome到74-版本。"><a href="#如果你和我用的chrome版本不同，可以根据实际版本选择下载，当然也可直接更新你的Chrome到74-版本。" class="headerlink" title="如果你和我用的chrome版本不同，可以根据实际版本选择下载，当然也可直接更新你的Chrome到74+版本。"></a>如果你和我用的chrome版本不同，可以根据实际版本选择下载，当然也可直接更新你的Chrome到74+版本。</h5><h6 id="ChromeDriver-https-sites-google-com-a-chromium-org-chromedriver-downloads"><a href="#ChromeDriver-https-sites-google-com-a-chromium-org-chromedriver-downloads" class="headerlink" title="ChromeDriver](https://sites.google.com/a/chromium.org/chromedriver/downloads)"></a>ChromeDriver](<a href="https://sites.google.com/a/chromium.org/chromedriver/downloads" target="_blank" rel="noopener">https://sites.google.com/a/chromium.org/chromedriver/downloads</a>)</h6><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/benxin/image_depot/master/img/%2020190331145358.png" alt title>                </div>                <div class="image-caption"></div>            </figure><ol start="2"><li><p>demo</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line">driver = webdriver.Chrome()</span><br><span class="line">driver.get(<span class="string">"https://www.douban.com"</span>)</span><br><span class="line">driver.switch_to.frame(<span class="number">0</span>)</span><br><span class="line">driver.find_element_by_class_name(<span class="string">"account-tab-account"</span>).click()</span><br><span class="line">driver.find_element_by_id(<span class="string">"username"</span>).send_keys(<span class="string">"your_username"</span>)</span><br><span class="line">driver.find_element_by_id(<span class="string">"password"</span>).send_keys(<span class="string">"your_password"</span>)</span><br><span class="line">driver.find_element_by_partial_link_text(<span class="string">"登录豆瓣"</span>).click()</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git 使用代理</title>
      <link href="/2019/08/01/git-proxy/"/>
      <url>/2019/08/01/git-proxy/</url>
      
        <content type="html"><![CDATA[<h4 id="Git-使用代理"><a href="#Git-使用代理" class="headerlink" title="Git 使用代理"></a>Git 使用代理</h4><ul><li><p>有时候我们需要克隆一些比较大的文件时,因为网络环境的关系,这个时候就需要通过代理来提高速度.</p></li><li><p>先决条件 电脑已配置科学上网环境</p></li></ul><h4 id="方法一使用命令行"><a href="#方法一使用命令行" class="headerlink" title="方法一使用命令行"></a>方法一使用命令行</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 以下使用http代理</span></span><br><span class="line">git config --global http.proxy http://127.0.0.1:1080</span><br><span class="line">git config --global https.proxy https://127.0.0.1:1080</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 以下使用socks5代理</span></span><br><span class="line">git config --global http.proxy socks5://127.0.0.1:1080</span><br><span class="line">git config --global https.proxy socks5://127.0.0.1:1080</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 取消代理</span></span><br><span class="line">git config --global --unset http.proxy</span><br><span class="line">git config --global --unset https.proxy</span><br></pre></td></tr></table></figure><h4 id="方法二-直接修改配置文件"><a href="#方法二-直接修改配置文件" class="headerlink" title="方法二  直接修改配置文件"></a>方法二  直接修改配置文件</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 打开git配置文件</span></span><br><span class="line">nano ~/.gitconfig</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 复制以下配置 ctrl+<span class="built_in">shift</span>+v 粘贴 ctrl+x 输入y保存</span></span><br><span class="line">[https]</span><br><span class="line">proxy = https://127.0.0.1:1080</span><br><span class="line">[http]</span><br><span class="line">proxy = http://127.0.0.1:1080</span><br><span class="line"></span><br><span class="line">[http]</span><br><span class="line">     proxy = socks5://127.0.0.1:1080</span><br><span class="line">[https]</span><br><span class="line">     proxy = socks5://127.0.0.1:1080</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> GitHub </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Termux 远程连接linux ，及使用python在手机上搭建一个简单的资源共享服务器。</title>
      <link href="/2019/08/01/Termux/"/>
      <url>/2019/08/01/Termux/</url>
      
        <content type="html"><![CDATA[<h5 id="Termux是一个Android终端模拟器和Linux环境应用程序，可直接使用，无需root或设置。自动安装最小基本系统，使用APT包管理器可以使用其他软件包。"><a href="#Termux是一个Android终端模拟器和Linux环境应用程序，可直接使用，无需root或设置。自动安装最小基本系统，使用APT包管理器可以使用其他软件包。" class="headerlink" title="Termux是一个Android终端模拟器和Linux环境应用程序，可直接使用，无需root或设置。自动安装最小基本系统，使用APT包管理器可以使用其他软件包。"></a>Termux是一个Android终端模拟器和Linux环境应用程序，可直接使用，无需root或设置。自动安装最小基本系统，使用<a href="https://wiki.termux.com/wiki/APT" target="_blank" rel="noopener">APT</a>包管理器可以使用其他软件包。</h5><h5 id="Termux-安装"><a href="#Termux-安装" class="headerlink" title="Termux 安装"></a>Termux 安装</h5><h6 id="Google-Play"><a href="#Google-Play" class="headerlink" title="Google Play"></a><a href="https://play.google.com/store/apps/details?id=com.termux" target="_blank" rel="noopener">Google Play</a></h6><h6 id="F-Droid"><a href="#F-Droid" class="headerlink" title="F-Droid"></a><a href="https://f-droid.org/repository/browse/?fdid=com.termux" target="_blank" rel="noopener">F-Droid</a></h6><h5 id="更换源文件及安装一些必要的软件"><a href="#更换源文件及安装一些必要的软件" class="headerlink" title="更换源文件及安装一些必要的软件"></a>更换源文件及安装一些必要的软件</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 添加国内的源文件,默认的是国外的,安装软件比较慢</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 编辑源文件</span></span><br><span class="line">vi  $PREFIX/etc/apt/sources.list</span><br><span class="line">deb https://mirrors.ustc.edu.cn/termux stable main</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/termux stable main</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 或使用<span class="built_in">echo</span>命令</span></span><br><span class="line">echo "deb https://mirrors.ustc.edu.cn/termux stable main" &gt;&gt; $PREFIX/etc/apt/sources.list</span><br><span class="line">echo "deb https://mirrors.tuna.tsinghua.edu.cn/termux stable main" &gt;&gt; $PREFIX/etc/apt/sources.list</span><br><span class="line">apt update</span><br></pre></td></tr></table></figure><h5 id="PC-连接到手机"><a href="#PC-连接到手机" class="headerlink" title="PC 连接到手机"></a>PC 连接到手机</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装一些必要的软件</span></span><br><span class="line">apt install git vim  zsh curl openssh python -y</span><br><span class="line"><span class="meta">#</span><span class="bash"> 手机端生成密钥ssh-keygen</span></span><br><span class="line">ssh-keygen -b 4096 -t rsa</span><br><span class="line"><span class="meta">#</span><span class="bash"> 将生产的密钥复制到远程计算机</span></span><br><span class="line">ssh-copy-id username@your_ip -p your_ip</span><br><span class="line"><span class="meta">#</span><span class="bash"> username计算机名可以使用whoami命令查看, your_ip 使用ip -a 命令查看</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Linux ssh默认端口22 如果你修改过忘记了 使用vim 打开查看,如果开了防火墙请将端口号放行</span></span><br><span class="line">vi /etc/ssh/sshd_config  # 找到port这行查看</span><br><span class="line"><span class="meta">#</span><span class="bash"> 请参考我的进行替换 </span></span><br><span class="line">ssh-copy-id benxin@10.0.0.5 -p 2333 </span><br><span class="line"><span class="meta">#</span><span class="bash"> 做完以上这些你就可以从Linux计算机使用ssh连接你的手机</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> whoami 手机上使用whoami查看用户名一般是u开头的 </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> termux 默认端口号 8022 可以自定义 0---65535 可以使用知名端口以外的其它端口</span></span><br><span class="line">sshd -p 233 # 设置端口号为233</span><br><span class="line"><span class="meta">#</span><span class="bash"> Linux上使用ssh命令连接你的Android手机</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将u0_xx和10.0.0.8 替换成你自己的</span></span><br><span class="line">ssh u0_xx@10.0.0.8 -p 8022</span><br><span class="line"><span class="meta">#</span><span class="bash"> 连接成功后可以在Linux执行下面的操作,手机上操作非常不方便.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装zsh替换默认的bash</span></span><br><span class="line">sh -c "$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"</span><br><span class="line">vim .zshrc </span><br><span class="line"><span class="meta">#</span><span class="bash"> 更改主题,修改zsh配置文件的这一行,不想修改可跳过</span></span><br><span class="line">ZSH_THEME="ys"</span><br><span class="line"><span class="meta">#</span><span class="bash"> 切换终端的shell</span></span><br><span class="line">chsh -s zsh</span><br><span class="line"><span class="meta">#</span><span class="bash"> 简化命令</span></span><br><span class="line">alias psr='python -m http.server'</span><br><span class="line">alias h='history'</span><br><span class="line">alias clr='clear'</span><br></pre></td></tr></table></figure><h5 id="Linux连接Android"><a href="#Linux连接Android" class="headerlink" title="Linux连接Android"></a>Linux连接Android</h5><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/benxin/image_depot/master/img/%2020190801211726.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h5 id="连接pc"><a href="#连接pc" class="headerlink" title="连接pc"></a>连接pc</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> username计算机名可以使用whoami命令查看, your_ip 使用ip -a 命令查看 </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Linux 默认端口22 如果你修改过忘记了 使用vim 打开查看,如果开了防火墙请将端口号放行</span></span><br><span class="line">vi /etc/ssh/sshd_config</span><br><span class="line">ssh username@your_ip -p 2333</span><br></pre></td></tr></table></figure><h5 id="连接成功后可以使用手机控制Linux执行一些简单的操作"><a href="#连接成功后可以使用手机控制Linux执行一些简单的操作" class="headerlink" title="连接成功后可以使用手机控制Linux执行一些简单的操作"></a>连接成功后可以使用手机控制Linux执行一些简单的操作</h5><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/benxin/image_depot/master/img/%2020190801210244.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h5 id="外部储存访问"><a href="#外部储存访问" class="headerlink" title="外部储存访问"></a>外部储存访问</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 外部储存访问参考文档 https://wiki.termux.com/wiki/Termux-setup-storage</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 执行以下命令</span></span><br><span class="line">termux-setup-storage</span><br><span class="line"><span class="meta">$</span><span class="bash">HOME/storage/</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 禁用震动提示</span></span><br><span class="line">在`$HOME/.termux/termux.properties`文件中配置`bell-character = ignore`</span><br></pre></td></tr></table></figure><h5 id="获取-su权限"><a href="#获取-su权限" class="headerlink" title="获取 su权限"></a>获取 su权限</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git clone https://gitlab.com/st42/termux-sudo.git</span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果安装 ncurses-utils 报错,请安装这个版本的ncurses 再次执行3行的命令</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> apt install ncurses=6.1.20190511-5</span></span><br><span class="line">cd termux-sudo &amp;&amp; pkg install ncurses-utils</span><br><span class="line">cat sudo &gt; /data/data/com.termux/files/usr/bin/sudo </span><br><span class="line">chmod 700 /data/data/com.termux/files/usr/bin/sudo</span><br></pre></td></tr></table></figure><h5 id="在-Android-运行Termux-app使用python做一些有趣的事"><a href="#在-Android-运行Termux-app使用python做一些有趣的事" class="headerlink" title="在 Android 运行Termux  app使用python做一些有趣的事"></a>在 Android 运行Termux  app使用python做一些有趣的事</h5><pre><code>使用python运行一个简单的http服务器 ,实现局域网pc共享手机资源.python -m http.server在手机上桥这一段还是不太方便,可以试试 psr (alias psr=&apos;python -m http.server&apos; 之前将这行代码)</code></pre><h5 id="简单的静态http-server-如果你觉得功能太过简陋不能满足你的需求-你还可以使用python写一个功能更加完善的服务器更好的共享资源，也可以在上面跑rRequests-爬虫库使用爬虫抓取想要的资源。"><a href="#简单的静态http-server-如果你觉得功能太过简陋不能满足你的需求-你还可以使用python写一个功能更加完善的服务器更好的共享资源，也可以在上面跑rRequests-爬虫库使用爬虫抓取想要的资源。" class="headerlink" title="简单的静态http server 如果你觉得功能太过简陋不能满足你的需求,你还可以使用python写一个功能更加完善的服务器更好的共享资源，也可以在上面跑rRequests 爬虫库使用爬虫抓取想要的资源。"></a>简单的静态http server 如果你觉得功能太过简陋不能满足你的需求,你还可以使用python写一个功能更加完善的服务器更好的共享资源，也可以在上面跑rRequests 爬虫库使用爬虫抓取想要的资源。</h5><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/benxin/image_depot/master/img/%2020190801213234.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h5 id="使用PC端的浏览器预览手机资源也非常方便-局域的其它设备都可以访问"><a href="#使用PC端的浏览器预览手机资源也非常方便-局域的其它设备都可以访问" class="headerlink" title="使用PC端的浏览器预览手机资源也非常方便,局域的其它设备都可以访问."></a>使用PC端的浏览器预览手机资源也非常方便,局域的其它设备都可以访问.</h5><pre><code>在浏览器输入手机的IP和端口号即可访问手机资源 例如10.0.0.4:8000在上图中可以看到局域网的IP 10.0.0.2  发送了一个GET请求，响应状态码200 请求成功！</code></pre><h6 id="主目录"><a href="#主目录" class="headerlink" title="主目录"></a>主目录</h6><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/benxin/image_depot/master/img/%2020190801214227.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h5 id="预览图片资源"><a href="#预览图片资源" class="headerlink" title="预览图片资源"></a>预览图片资源</h5><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/benxin/image_depot/master/img/%2020190801214909.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h5 id="播放媒体文件"><a href="#播放媒体文件" class="headerlink" title="播放媒体文件"></a>播放媒体文件</h5><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/benxin/image_depot/master/img/%2020190801215302.png" alt title>                </div>                <div class="image-caption"></div>            </figure>]]></content>
      
      
      <categories>
          
          <category> Termux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Termux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git 配置SSH密钥</title>
      <link href="/2019/08/01/Git%20%E9%85%8D%E7%BD%AESSH%E5%AF%86%E9%92%A5/"/>
      <url>/2019/08/01/Git%20%E9%85%8D%E7%BD%AESSH%E5%AF%86%E9%92%A5/</url>
      
        <content type="html"><![CDATA[<h4 id="Git-配置SSH密钥"><a href="#Git-配置SSH密钥" class="headerlink" title="Git 配置SSH密钥"></a>Git 配置SSH密钥</h4><ol><li><h6 id="生成SSH密钥"><a href="#生成SSH密钥" class="headerlink" title="生成SSH密钥"></a>生成SSH密钥</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -b 4096 -C "your_email@example.com"</span><br></pre></td></tr></table></figure></li><li><h6 id="查看生成的密钥-并复制密钥"><a href="#查看生成的密钥-并复制密钥" class="headerlink" title="查看生成的密钥 并复制密钥"></a>查看生成的密钥 并复制密钥</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure></li><li><h6 id="将密钥配置到GitHub"><a href="#将密钥配置到GitHub" class="headerlink" title="将密钥配置到GitHub"></a>将密钥配置到GitHub</h6><p><img src="https://raw.githubusercontent.com/benxin/image_depot/master/img/20190321172351.png" alt="GitHub"></p></li></ol><h5 id="https-免密码配置"><a href="#https-免密码配置" class="headerlink" title="https 免密码配置"></a>https 免密码配置</h5><ul><li><p>新建文件保存密码</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.git-credentials</span><br></pre></td></tr></table></figure></li><li><h6 id="添加以下内容"><a href="#添加以下内容" class="headerlink" title="添加以下内容"></a>添加以下内容</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://&#123;username&#125;:&#123;passwd&#125;@github.com</span><br></pre></td></tr></table></figure></li><li><h6 id="添加git配置"><a href="#添加git配置" class="headerlink" title="添加git配置"></a>添加git配置</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global credential.helper store</span><br></pre></td></tr></table></figure></li><li><h6 id="查看变化"><a href="#查看变化" class="headerlink" title="查看变化"></a>查看变化</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat ~/.gitconfig</span><br><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> GitHub </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
