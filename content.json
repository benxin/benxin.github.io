[{"title":"Python中的编解码问题,UnicodeEncodeError和UnicodeDecodeError","date":"2019-09-29T10:02:51.414Z","path":"2019/09/29/Python 中的编码问题/","text":"Python 中的编码问题.相信大部分使用python的用户,都遇到过Python的编解码出错的问题,很不幸我也遇到过,今天写个笔记,当备忘. Unicode 计算机科学领域里的一项业界标准 (中文：万国码、国际码) UTF-8 是一种针对Unicode的可变长度字符编码,它可以用来表示Unicode标准中的任意字符,UTF-8是Unicode的实现方式之一. GB2312 我国早期的,国家标准简体中文字符集,未收录繁体字. GB18030 《信息技术 中文编码字符集》GB18030完全向后兼容GBK, GB2312 Big5 Big5 又称为五大码 普及地区 台湾/香港/澳门 (使用繁体中文,正体中文) ASCII 美国信息交换标准代码,是基于拉丁拉丁字母的一套计算机编码系统. UnicodeEncodeError 把字符转换成二进制序列出错 UnicodeDecodeError 把二进制序列转换成字符串出错 bytes —&gt; str 使用decode解码 str —&gt; bytes 使用encode编码码 UnicodeEncodeError demo 12345678910111213141516171819202122232425262728str = 'python之禪'# 使用utf-8编码In [18]: ret = str.encode('utf-8')In [19]: retOut[20]: b'python\\xe4\\xb9\\x8b\\xe7\\xa6\\xaa' # 使用big5编码In [22]: ret = str.encode('big5')In [23]: retOut[23]: b'python\\xa4\\xa7\\xc1I' # 使用gb2312进行编码时,编码出错抛出 UnicodeEncodeErrorIn [26]: ret = str.encode('gb2312')---------------------------------------------------------------------------UnicodeEncodeError Traceback (most recent call last)&lt;ipython-input-26-94b37d4914e4&gt; in &lt;module&gt;()----&gt; 1 ret = str.encode('gb2312')UnicodeEncodeError: 'gb2312' codec can't encode character '\\u79aa' in position 7: illegal multibyte sequence # 使用gb18030编码In [63]: str = 'python之禪'In [64]: ret = str.encode('gb18030')In [65]: retOut[65]: b'python\\xd6\\xae\\xb6U' 上面使用gb2312 进行编码,出现UnicodeEncodeError错误的原因是,gb2312标准中收录的字符,并未涵盖繁体中文字,而上面的python之禪中的”禪”字正好是一个繁体字,因此使用gb2312就无法对它进行编码,所以会抛出UnicodeEncodeError,而后来使用的gbk和gb18030则解决了这个问题. UnicodeDecodeError demo 12345678910111213141516171819202122232425262728293031323334353637383940414243# 通过编码汉字'之禪'得到bytes类型数据 b'\\xd6\\xae\\xb6U'In [96]: str = '之禪'.encode('gb18030')In [97]: strOut[97]: b'\\xd6\\xae\\xb6U'# 使用big5解码发现汉字'之禪'使用gb18030编码成bytes类型数据后,如果再用big5解码就会货不对版. In [99]: b'\\xd6\\xae\\xb6U'.decode('big5')Out[99]: '眳貸'# 接下来在使用utf-8看下,直接抛出异常.In [100]: b'\\xd6\\xae\\xb6U'.decode('utf-8')---------------------------------------------------------------------------UnicodeDecodeError Traceback (most recent call last)&lt;ipython-input-100-48aba63cd6ed&gt; in &lt;module&gt;()----&gt; 1 b'\\xd6\\xae\\xb6U'.decode('utf-8')UnicodeDecodeError: 'utf-8' codec can't decode byte 0xb6 in position 2: invalid start byte# 再看下这个例子: 通过下面这个例子我们可以知道对于拉丁字母,使用utf-8,和gb18030,big5这几种编码方式进行编码,它都占用一个字节.In [77]: len('p'.encode('utf-8'))Out[77]: 1In [78]: len('p'.encode('gb18030'))Out[78]: 1 In [84]: len('p'.encode('big5'))Out[84]: 1 # 通过下面这个例子我们可以知道对于汉字,使用gb18030,big5编码占用2个字节,而utf-8则占用3个字节. In [101]: len('我'.encode('gb18030'))Out[101]: 2In [102]: len('我'.encode('big5'))Out[102]: 2In [103]: len('我'.encode('utf-8'))Out[103]: 3 使用gb18030编码汉字’之禪’得到bytes类型数据 b’\\xd6\\xae\\xb6U’ ,使用big5解码不会抛异常,但解码结果不是我们想要的,因为在big5中b’\\xd6\\xae\\xb6U’对应的解码就是’眳貸’ ,如何证明这个结论,可以使用big5对这两个字进行编码转换成bytes类型数据,查看结果对比即可. 1234In [104]: str = '眳貸'In [105]: str.encode('big5')Out[105]: b'\\xd6\\xae\\xb6U' 而使用utf-8解码直接抛出异常,这是因为,b’\\xd6\\xae\\xb6U’在’utf-8’中不是有效的utf-8字符串,因此抛出UnicodeDecodeError 添加参数对无法编解码的数据添加预处理措施,防止程序因为遇到无法编解码的数据时,直接抛异常. 原来使用gb2312对’python之禪’这段字符编码会抛出异常,添加errors参数后会将无法编码的数据替换成?号这样就会知道数据损坏了. 1234567891011121314In [107]: str = 'python之禪'.encode('gb2312',errors='replace')In [108]: strOut[108]: b'python\\xd6\\xae?' -------------------------------------------------------------------# 原来直接使用utf-8对gb18030编码的数据进行解码会直接抛:UnicodeDecodeError现在会使用乱码替换无法解码的部分数据.In [113]: str = 'python之禪'.encode('gb18030')In [114]: strOut[114]: b'python\\xd6\\xae\\xb6U'In [115]: str.decode('utf-8',errors='replace')Out[115]: 'python֮�U' 最后总结,编解码时对于数据涉较多语言时应该使用utf-8进行编解码,解码时如过已知编码使用的是某种类型编码方式编码的,就直接使用该编码进行解码是最好的,但如果不确定,则可以优先尝试utf-8.","tags":[{"name":"Python","slug":"Python","permalink":"https://benxin.xyz/tags/Python/"}]},{"title":"使用vps搭建shadowsocks","date":"2019-09-22T10:57:48.825Z","path":"2019/09/22/vps&ss/","text":"安装准备/说明. 需要购买 vps一台 系统建议使用 Debian GNU/Linux ,如果你比较熟悉其它Linux发行版如CentOS 也可以使用你熟悉的发型版. 连接远程的vps主机 1234567891011# Linux/macOS用户使用 ssh命令直接连接你的vps主机,命令示例:ssh -p 端口号 用户名@IP地址 # ssh命令格式# 此示例为主机默认端口为22的示例ssh root@100.100.100.1 # 100.100.100.1 是你远程主机的IP地址.# 非默认端口为22,假设你的vps主机端口号为10087,IP为100.100.100.1.ssh -p 10087 root@100.100.100.1# Windows 10 最新版已经内置了ssh,也可以直接使用ssh命令,但我建议安装:MobaXterm进行连接.MobaXterm官方网址: https://mobaxterm.mobatek.net/ 安装 shadowsocks 1234567配置源文件nano /etc/apt/sources.listdeb http://ftp.debian.org/debian buster-backports mainapt update# 安装apt -t buster-backports install shadowsocks-libev 开启bbr/开启TCP Fast Open 12345678# 开启bbrecho \"net.core.default_qdisc=fq\" &gt;&gt; /etc/sysctl.confecho \"net.ipv4.tcp_congestion_control=bbr\" &gt;&gt; /etc/sysctl.conf# 开启TCP Fast Open echo \"net.ipv4.tcp_fastopen = 3\" &gt;&gt; /etc/sysctl.confsysctl -p 配置shadowsocks config 文件 1234567891011121314151617181920212223# 配置参数 # \"server\":\"10.10.344.1\" ip 替换为你vps的ip.# server_port 443 端口号成任意端口号,但需小于65535.# \"password\":\"pwd\" pwd 改成你希望的密码# \"method\":\"chacha20-ietf-poly1305\" 加密算法应该使用AEAD加密算法如下: xchacha20-ietf-poly1305 chacha20-ietf-poly1305 aes-256-gcm aes-192-gcm aes-128-gcm # 修改配置nano /etc/shadowsocks-libev/config.json&#123; \"server\":\"10.10.10.1\", \"mode\":\"tcp_and_udp\", \"server_port\":443, \"local_port\":1080, \"password\":\"pwd\", \"timeout\":60, \"method\":\"chacha20-ietf-poly1305\", \"fast_open\": true&#125; 重启shadowsocks 1234567891011121314# 重启 shadowsockssudo systemctl restart shadowsocks-libev# 查看状态systemctl status shadowsocks-libev# 设置开机启动systemctl enable shadowsocks-libev# 查看bbrlsmod | grep bbr # 开启成功效果如下tcp_bbr 20480 29 shadowsocks客户端安装 所有的客户端配置相差不大,只需要填写几项必填参数 server,server_port,password,method 填写与服务器保持一至,其它参数无需修改,这里以Windows客户做示例: Windows Android macOS iPhone iPhone客户端shadowrocket是收费软件,并且需要一个非中国区apple账户才能安装. Linux sudo apt install shadowsocks-qt5","tags":[{"name":"vps","slug":"vps","permalink":"https://benxin.xyz/tags/vps/"}]},{"title":"Flask-SQLAlchemy连接MySQL报错处理.(Python3)","date":"2019-08-18T05:42:36.968Z","path":"2019/08/18/Flask-SQLAlchemy connection-mysql/","text":"Python3 Flask-SQLAlchemy连接 MySQL报错”no module named ‘mysqldb’ “ 错误信息 1234# 没有名为mysqldb的模块# 在python2的时候连接驱动模块是: MySQL-python,在python3中使用的是mysqlclient它是MySQL-python的一个分支,增加了对Python3的支持,及修复了错误. # 原因是没有正确的安装连接MySQL的驱动modulenotfounderror no module named 'mysqldb' 解决方法 stackoverflow 上开发者提供的方法: 12345# 将pwd替换成你的数据库密码# 将dbname替换成你要连接的数据库SQLALCHEMY_DATABASE_URI = \"mysql+pymysql://root:pwd@localhost/dbname\"# 如果你还没有在你的虚拟环境中安装PyMySQL使用以下命令安装python3 -m pip install PyMySQL Python官方文档提供的解决方法: Python 官方文档 1234sudo apt-get install python3-devpip install mysqlclientSQLALCHEMY_DATABASE_URI = \"mysql://root:pwd@localhost/dbname\"","tags":[{"name":"Flask-SQLAlchemy","slug":"Flask-SQLAlchemy","permalink":"https://benxin.xyz/tags/Flask-SQLAlchemy/"}]},{"title":"Git常用命令","date":"2019-08-17T20:29:19.486Z","path":"2019/08/18/use-get/","text":"Git常用操作命令首次使用设置123456789101112# 安装gitsudo apt install git -y# 个人信息设置 git config --global user.name \"用户名\"git config --global user.email abc@example.com# 查看配置信息git config --list# 手动编辑配置文件nano ~/.gitconfig 基本操作 克隆一个仓库 1git clone url _初始化本地仓库 1git init 检查文件状态 123touch README.mdgit status 跟踪文件 1234567891011121314# 将 README.md提交到暂存区git add README.md# 将所有文件提交到暂存区git add -A 或者 git add .git status# 取消将README.md提交到暂存区git rm --cached README.md# 如果需要取消所有的暂存区文件使用git rm --cached * 提交更新 123456echo \"hello git\" &gt;&gt; README.mdgit commit -m '本次提交更新的内容描述'# 跳过暂存区直接提交更新git commit -a -m '本次提交更新的内容描述' 查看提交历史 123git loggit log --stat 取消暂存的文件 1git reset HEAD README.md 撤销对文件的修改 1234567# 将hello git 追加到README.md文件中echo \"hello git \" &gt;&gt; README.md# 如果想要撤销对README.md 文件的修改,执行以下命令 [将工作区代码撤销至上次修改]git checkout -- README.md# 将暂存区代码撤销至工作区git reset HEAD 文件名 版本回退 1234567891011# 回退到上一个版本git reset --hard HEAD^# 回退到倒数第2个版本git reset --hard HEAD~2# 回退到之前n个版本 n指某一个数字git reset --hard HEAD~n# 根据版本号回退到指定的版本git reflog# 03a673d 是你要回退的到的某个版本号git reset --hard 03a673d 删除文件 123git rm 文件名# 强制删除git rm -f 文件名 远程仓库使用 创建远程 GitHub仓库 注册GitHub –&gt; 进入个人仓库主页,点击右上角铃铛旁边的加号 –&gt; 点击 New repository 开始创建仓库. 仓库初始操作 1234567cd ~/testgit init git add README.mdgit commit -m \"first commit\"git remote add origin 仓库urlgit push -u origin master 同步远程仓库 12345678echo \"hello python\" &gt;&gt; hello.pygit commit -a -m \"add hello python\"# 将本地的更新操作推送到远程仓库git push # 从远程仓库拉取代码到本地git pull 分支操作 123456789101112131415161718192021222324252627282930# 创建了一名为dev的分支git branch dev# 查看分支git branch # 切换分支 [从master分支切换至dev分支]git checkout dev echo \"create dev branch\" &gt;&gt; README.mdgit commit -a -m \"创建开发分支\"# 将更新推送到远程仓库的dev分支git push --set-upstream origin dev# 创建并切换至test 分支git checkout -b test # 删除分支 git branch -d dev# 强制删除git branch -D dev# 合并代码 git checkout master # 将dev分支合并至master分支git merge dev 代码冲突 1234567891011121314151617181920# dev 分支 hello.py文件cat hello.pydef say_hello(): print(\"i like coding\") # master分支 hello.py 文件cat hello.pydef say_hello(): pass# 代码冲突信息git merge dev自动合并 hello.py冲突（添加/添加）：合并冲突于 hello.py自动合并失败，修正冲突然后提交修正的结果。# 查看并非解决冲突信息git mergetool 重新推送代码到GitHub仓库 123git commit -a -m 'update hello.py'git merge dev 给分支添加标签 1234# 添加标签 &lt;v1.0&gt; 标签名 'version 1.0' 标签描述git tag -a v1.0 -m 'version 1.0'# 将标签推送到GitHub仓库git push origin v1.0 移除标签 12345git tag -d 标签名git tag -d v1.0# 移除远程GitHub仓库标签git push origin --delete tag 标签名git push origin --delete tag v1.0 git 设置别名123456789# 编辑gitconfig 配置文件添加别名vi ~/.gitconfig[alias] dog = log --all --decorate --oneline --graph st = status co = checkout br = branch ci = commit -a -v","tags":[{"name":"git","slug":"git","permalink":"https://benxin.xyz/tags/git/"}]},{"title":"Linux/Debian/Ubuntu,安装Google chrome","date":"2019-08-11T05:31:16.876Z","path":"2019/08/11/LinuxDebianUbuntu,安装Google-chrome/","text":"Linux/Debian/Ubuntu,安装Google chrome浏览器的方式.chrome是一款非常好用的浏览器,近期更新至了chrome76.+的版本,将域名前缀部分的HTTP和www做了隐藏,让用户更加专注于域名本身 ,一直以来在Windows平台安装chrome一般都是下载.exe的安装包直接安装,Linux平台也有小伙伴们喜欢下载好.deb的包安装,可是这么安装有一个缺陷那就是无法收到更新,每次有新版本都需要手动安装.比较麻烦,下面来看下其它的安装方式. 安装Linux包签名密钥 Debian, Ubuntu 1wget -q -O - https://dl.google.com/linux/linux_signing_key.pub | sudo apt-key add - Fedora, SUSE, Mandriva, RHEL, 12wget https://dl.google.com/linux/linux_signing_key.pubsudo rpm --import linux_signing_key.pub 配置镜像源 123sudo sh -c 'echo \"deb http://dl.google.com/linux/chrome/deb/ stable main\" &gt;&gt; /etc/apt/sources.list.d/google.listsudo apt update 安装chrome(推荐) 1234# 稳定版/公测版sudo apt install google-chrome-stable -ysudo apt install google-chrome-beta -y 使用deb包的安装方式(不推荐) 123wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.debsudo dpkg -i ./google-chrome * .deb","tags":[{"name":"Chrome","slug":"Chrome","permalink":"https://benxin.xyz/tags/Chrome/"}]},{"title":"介绍一款Linux 平台好用的开源截图工具 Flameshot","date":"2019-08-11T00:15:53.253Z","path":"2019/08/11/Flameshot/","text":"FlameshotFlameshot 是我目前在Linux使用体验感觉最好的一款截图工具,并且它开源(开源协议GPL-3.0) GitHub仓库:Flameshot 感觉不错可以去点个赞. 记得当初在刚切换到Linux平台的时候,用的是自带shutter截图使用起来特别不方便,用户体验特别糟糕. 后来在Google search 的帮助下我找到了Flameshot 这款截图软件.当时我使用的是Debian 9（Stretch）那时候没有安装包只能编译安装,期间也是遇到各种坑爹的依赖问题,好的接下来看下现在怎么安装这款截图工具. 安装 Flameshot Debian 10+：apt install flameshot Ubuntu 18.04+：apt install flameshot 解绑 shutter12# 释放默认绑定的截图工具shutter所占用的快捷键 gsettings set org.gnome.settings-daemon.plugins.media-keys screenshot '' 给 Flameshot 设置快捷键 设置 —-&gt; 设备 —-&gt; keyboard —-&gt; 鼠标移动菜单至底部点击 +号添加自定义快捷键. 在名称栏目填写: flameshot 在命令栏目填写: flameshot gui 在快捷键栏目填写: 一个自己喜欢的启动截图工具按键(通常为:Prt Sc 按键) 如下图: set 给 Flameshot 设置快捷启动命令.123456789# 使用默认的shell用户sudo echo \"alias ft='flameshot gui'\" &gt;&gt; ~/.bashrc# 重载配置文件source ~/.bashrc # 使用zsh用户sudo echo \"alias ft='flameshot gui'\" &gt;&gt; ~/.zshrc# 重载配置文件source ~/.zshrc 接下来就可以在终端使用ft命令启动flameshot进行截图。 photo","tags":[{"name":"Flameshot","slug":"Flameshot","permalink":"https://benxin.xyz/tags/Flameshot/"}]},{"title":"Debian 登录后成功,却看不到桌面解决方法.","date":"2019-08-06T03:43:46.030Z","path":"2019/08/06/Debian-desktop-error/","text":"Debian 登录后成功,却看不到桌面解决方法.事件可能原因?今天上重启了系统之后,和以往一样正常登录操作系统,输入密码登录成功!却发现桌面除了背景图片什么也看不到,也无法使用terminal,这时候先想到了万能的重启,好的重启试试,再次登录发现问题依旧,如是我在想最近执行了什么操作,思考了一会想起,好像昨天执行了卸载gnome-shell相关的操作.在想这能是与这个有关.好了废话不多说,下面看下解决方法. 解决方法. 重启系统让画面停留在登陆界面,如下图: Debian-login 登录GUI控制台,使用快捷键 : CTRL+alt+f2 看到如下界面. login 在此界面使用你的账户密码进行登录,成功登录如下图: Debian-gui 卸载重装gnome 123456789# 卸载sudo apt-get autoremove gdm3sudo apt-get autoremove --purge gnome*# 重启sudo shutdown -r now #或者使用 sudo reboot # 重启后登录系统,重新安装gnomesudo apt install gnomeapt-get install task-gnome-desktop","tags":[{"name":"Debian","slug":"Debian","permalink":"https://benxin.xyz/tags/Debian/"}]},{"title":"使用PyMySQL库连接MySQL数据库实现增删改查","date":"2019-08-05T09:49:30.523Z","path":"2019/08/05/PyMySQL-action/","text":"使用PyMySQL库连接MySQL数据库实现增删改查 先决条件数据库版本要求 MySQL &gt;= 5.5 MariaDB &gt;= 5.5 安装PyMySQL 1python3 -m pip install PyMySQL 部分参数说明 12345678910111213141516171819202122232425# PyMySQL 相关参数# 连接数据库host # 服务器ipuser # 数据库用户名password # 数据库密码db # 连接的数据charset # 数据库通信使用的字符集cursors.DictCursor # 将结果作为字典类型数据返回的游标 # Python字典是散列表的实现,在平均情况下查找,增加和删除时间复杂度为O(1)connection = pymysql.connect(host='localhost', user='user', password='passwd', db='db', charset='utf8', cursorclass=pymysql.cursors.DictCursor)# 创建游标cursor = db.cursor()# 关闭游标cursor.close()# 执行sql语句cursor.execute(sql)# 提交数据到数据库db.commit()# 回滚操作db.rollback() demo 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394#!usr/bin/env python# -*- coding:utf-8 _*-\"\"\"@Author: benxin@File: sql_demo.py\"\"\"from pymysql import connect, cursorsclass SqlAction(): '''数据库曾删改查''' def __init__(self): self.connection = connect(host='localhost', user='root', password='pwd', db='db01', charset='utf8mb4', cursorclass=cursors.DictCursor) def query_data(self, query): # 查询数据 if query: with self.connection.cursor() as cursor: sql = query cursor.execute(sql) try: self.connection.commit() except: self.connection.rollback() else: # 查询单条 # result = cursor.fetchone() # 查询多条数据 result = cursor.fetchall() for row in result: if row: print(row['name'], row['age'], row['gender']) def insert_data(self, insert): # 插入数据 if insert: with self.connection.cursor() as cursor: sql = insert cursor.execute(sql) try: self.connection.commit() except: self.connection.rollback() def update_data(self, update): # 更新数据 if update: with self.connection.cursor() as cursor: sql = update cursor.execute(sql) try: self.connection.commit() except: self.connection.rollback() def delete_data(self, delete): # 删除数据 if delete: with self.connection.cursor() as cursor: sql = delete cursor.execute(sql) try: self.connection.commit() except: self.connection.rollback() def close(self): # 关闭连接 self.connection.close()def run(): query = \"select * from students;\" insert = \"insert into students (id,name,age,height,address) values(0,'郭靖',27,178.00,'蒙古');\" update = \"update students set height=181.00 where name like '_靖';\" delete = \"delete from students where name like '%靖';\" mysql = SqlAction() mysql.query_data(query) # mysql.insert_data(insert) # mysql.update_data(update) # mysql.delete_data(delete) mysql.close()run()","tags":[{"name":"PyMySQL","slug":"PyMySQL","permalink":"https://benxin.xyz/tags/PyMySQL/"}]},{"title":"MySQL主从配置(适用于MySQL 8.0+)","date":"2019-08-04T17:28:14.287Z","path":"2019/08/05/MySQL Master-Slave/","text":"MySQL主从配置(适用于MySQL 8.0+) 配置主服务器12345主MySQL Server: 10.0.0.3从MySQL Server: 10.0.0.4# 编辑主服务器配置文件sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf 将以下配置信息粘贴至mysqld.cnf 文件 123bind-address = 10.0.0.3server-id = 1log_bin = /var/log/mysql/mysql-bin.log 重启MySQL服务 1sudo service mysql restart 创建一个新账户用于连接从服务器12345678910 # 创建用户 create user rpl_user@10.0.0.4 identified by 'password'; # 授权用户grant replication slave on *.* to rpl_user@10.0.0.4; # 确认授权show grants for replica_user@10.0.0.4;# 查看主服务器状态show master status\\G 配置从服务器12# 编辑从服务器配置文件sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf 将以下配置信息粘贴至mysqld.cnf 文件. 123bind-address = 10.0.0.4server-id = 2log_bin = /var/log/mysql/mysql-bin.log 重启MySQL服务 1sudo service mysql restart 登录从服务器 1mysql -u root -p 设置从服务器获取主服务器信息 1234567# MASTER_LOG_POS 使用命令show master status\\G查看的File:mysql-bin.xx 对应填写即可 # MASTER_LOG_FILE 使用命令show master status\\G查看的Position: xx 对应填写即可 CHANGE MASTER TO MASTER_HOST='10.0.0.3',MASTER_USER='rpl_user',MASTER_PASSWORD='password',MASTER_LOG_FILE='mysql-bin.000002',MASTER_LOG_POS=155; 启动从属线程 1start slave; 检查MySQL从服务器状态 1show slave status\\G 检查是否配置成功 登录主MySQL服务器创建一个新数据用来测试 1234# 登录主MySQL服务器mysql -uroot -p# 创建一个新数据库create database test_db charset='utf8'; 登录从MySQL服务器查看是否产生新数据 12mysql -uroot -pshow databases; MySQL数据库账户管理思维导图 HTML版 download","tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://benxin.xyz/tags/MySQL/"}]},{"title":"Debian安装MySQL","date":"2019-08-04T08:55:38.671Z","path":"2019/08/04/debian install mysql/","text":"debian 安装 MySQL 下载MySQL存储库.123https://dev.mysql.com/downloads/repo/apt/wget https://repo.mysql.com//mysql-apt-config_0.8.13-1_all.debsudo dpkg -i *.deb 更新源,从MySQL存储库更新包信息.1sudo apt update 安装MySQL.12# 在线安装sudo apt-get install mysql-server 离线deb包安装 MySQL url12# 选择需要的版本下载完成后,执行以下命令.dpkg -i *.deb MySQL服务.12345 # 查看状态(status) | 停止(stop) | 启动(start) | 重启(restart) sudo service mysql status # 也可以这么写sudo systemctl restart mysql 安装过程错误处理.123456789101112update-alternatives: 错误: 候选项路径 /etc/mysql/mysql.cnf 不存在dpkg: 处理软件包 mysql-server-5.7 (--configure)时出错： 子进程 已安装 post-installation 脚本 返回错误状态 2dpkg: 依赖关系问题使得 mysql-server 的配置工作不能继续： mysql-server 依赖于 mysql-server-5.7；然而： 软件包 mysql-server-5.7 尚未配置。dpkg: 处理软件包 mysql-server (--configure)时出错： 依赖关系问题 - 仍未被配置sudo apt-get remove --purge mysql-\\*sudo apt-get install mysql-server mysql-client","tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://benxin.xyz/tags/MySQL/"}]},{"title":"Debian简单的防火墙ufw规则设置","date":"2019-08-04T08:02:17.381Z","path":"2019/08/04/Debian-Firewall/","text":"Debian防火墙简单配置 安装简单的防火墙(ufw)sudo apt-get install ufw 防火墙基本规则12345678# 启用sudo ufw enable # 禁用sudo ufw disable# 重置sudo ufw reset# 重启sudo ufw reload 设置默认规则12sudo ufw default deny incomingsudo ufw default allow outgoing 查看规则12345678910111213141516171819202122sudo ufw status verbose# 或者这么写sudo ufw status[sudo] benxin 的密码：Status: activeLogging: on (low)Default: deny (incoming), allow (outgoing), disabled (routed)New profiles: skipTo Action From-- ------ ----22/tcp ALLOW IN Anywhere 22 ALLOW IN Anywhere 80/tcp ALLOW IN Anywhere 443/tcp ALLOW IN Anywhere 22233 ALLOW IN Anywhere 22/tcp (v6) ALLOW IN Anywhere (v6) 22 (v6) ALLOW IN Anywhere (v6) 80/tcp (v6) ALLOW IN Anywhere (v6) 443/tcp (v6) ALLOW IN Anywhere (v6) 22233 (v6) ALLOW IN Anywhere (v6) 设置规则,ufw默认禁止所有传入连接,所以需要进行简单的设置.12345# 开放ssh接入sudo ufw allow ssh# 拒绝ssh服务sudo ufw deny ssh 端口访问规则1234567891011121314151617# 允许使用通过tcp传输协议使用1000-2000范围的端口sudo ufw allow 1000:2000/tcp# 允许使用通过udp传输协议使用1000-2000范围的端口sudo ufw allow 1000:2000/udp# 允许所有通过80端口使用tcp协议的数据sudo ufw allow 80/tcp# 拒绝所用使用53端口的数据(tcp/udp)sudo ufw deny 53# 删除规则sudo ufw delete allow 80/tcp# 按协议删除规则sudo ufw delete allow http IP访问规则1234567891011# 允许的IP地址范围从 10.0.0.22 到 10.0.0.254 sudo ufw allow from 10.0.0.22/24# 允许22端口sudo ufw allow from 10.0.0.22# ip+端口限制,允许的IP地址范围从 10.0.0.22 到 10.0.0.254 使用22端口 sudo ufw allow from 10.0.0.22/24 to any port 22# ip+端口+协议限制, 允许10.0.0.22 通过22端口tcp协议sudo ufw allow from 10.0.0.22 to any port 22 proto tcp 12345# 拒绝IP 10.0.0.22 访问sudo ufw deny from 10.0.0.22# 拒绝IP 10.0.0.22 使用22端口访问sudo ufw deny from 10.0.0.22 to any port 22 获取帮助信息1man ufw","tags":[{"name":"ufw","slug":"ufw","permalink":"https://benxin.xyz/tags/ufw/"}]},{"title":"使用命令将Debian 9 更新至最新版本 Debian ‎10 (Buster)","date":"2019-08-03T04:30:36.748Z","path":"2019/08/03/debian-update/","text":"Debian ‎10 (Buster) 7月6号发布当天我就更新了，截至今天都快一个月了，这期间使用都非常稳定，今天就记录下更方式。 更新镜像文件 123456789101112131415161718sudo -inano /etc/apt/sources.list# 将以下镜像url粘贴至你的sources.list文件上,或继续使用你之前使用的源.# debian-officialdeb http://security.debian.org/ buster/updates maindeb-src http://security.debian.org/ buster/updates main# awsdeb http://cdn-aws.deb.debian.org/debian stable maindeb http://cdn-aws.deb.debian.org/debian-security stable/updates maindeb https://deb.debian.org/debian stable maindeb https://deb.debian.org/debian-security stable/updates main# huaweideb https://mirrors.huaweicloud.com/debian/ buster main contrib non-freedeb https://mirrors.huaweicloud.com/debian/ buster-updates main contrib non-freedeb https://mirrors.huaweicloud.com/debian/ buster-backports main contrib non-free 继续使用你之前使用Debian源 ,使用以下命令全局替换stretch 至 buster 12sed -i 's/stretch/buster/g' /etc/apt/sources.listsed -i 's/stretch/buster/g' /etc/apt/sources.list.d/*.list 更新 1apt update 升级系统 12apt-get upgradeapt-get dist-upgrade 清除系统安装后不需要的软件 12apt autoremoveapt clean 重启系统 123shutdown -r now# 重启如果发现桌面没有了, 只剩下一个黑窗口不用慌安装下桌面即可.sudo apt install gnome 查看版信息 123lsb_release -a# 使用screenfetch查看更加详细的信息apt install screenfetch","tags":[{"name":"Debian","slug":"Debian","permalink":"https://benxin.xyz/tags/Debian/"}]},{"title":"Debian&Ubuntu 更新内核","date":"2019-08-02T17:37:16.920Z","path":"2019/08/03/update-Kernel/","text":"本文介绍如何将Debian内核更新至最新版本 更换国内源 备份原来的源文件 sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak 编辑源文件 sudo nano /etc/apt/sources.list 清华大学开源镜像 华为开源镜像 可以根据自己的需求,去以上两个站点查看想要的源,这两个站点的速度都比较快,更新也很及时. 也可以直接使用我拷贝好的,Debian的安全更新源这里我使用的是官方和清华的. Ubuntu 可以去以上两站点查看相应的源进行配置,我自己在用Debian因为比较稳定. 粘贴以下内容到你的sources.list文件 CTRL+x 保存退出 1234567891011121314# debian-officialdeb http://security.debian.org/ buster/updates maindeb-src http://security.debian.org/ buster/updates main# huaweideb https://mirrors.huaweicloud.com/debian/ buster main contrib non-freedeb https://mirrors.huaweicloud.com/debian/ buster-updates main contrib non-freedeb https://mirrors.huaweicloud.com/debian/ buster-backports main contrib non-free# tsinghuadeb https://mirrors.tuna.tsinghua.edu.cn/debian/ buster main contrib non-freedeb https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-updates main contrib non-freedeb https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-backports main contrib non-freedeb https://mirrors.tuna.tsinghua.edu.cn/debian-security buster/updates main contrib non-free 更新 1sudo apt update 查看当前内核版本 1uname -ra 查找可更新的内核 1apt-cache search linux-image | grep amd64 安装内核 1sudo apt install -t buster linux-image-amd64 更新GRUB的启动菜单配 12sudo update-grubsudo shutdown -r now 清除旧的内核 12345678# 查看旧内核sudo dpkg --list 'linux-image*' # 将4.xx替换成实际要卸载的版本号, 例如要卸载的是: linux-image-4.19.0-5-amd64 就将4.xx改成4.19sudo apt-get remove linux-image-4.xxsudo apt-get autoremove# 查看下新版本的内核信息uname -ra 开启 bbr 12echo \"net.core.default_qdisc=fq\" &gt;&gt; /etc/sysctl.confecho \"net.ipv4.tcp_congestion_control=bbr\" &gt;&gt; /etc/sysctl.conf 查看效果 123$ sudo lsmod | grep bbr # 开启成功效果如下tcp_bbr 20480 29","tags":[{"name":"Kernel","slug":"Kernel","permalink":"https://benxin.xyz/tags/Kernel/"}]},{"title":"SSH - 远程主机识别已更改，产生错误。","date":"2019-08-01T15:07:41.229Z","path":"2019/08/01/ssh-keygen-wrong/","text":"记录下今天连接vps出现的问题,因为重装系统由CentOS切换到了Debian,但是本地客户端还储存着远程主机之前的公钥信息导致以下错误。错误信息： WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED! 。解决方法，移除本地主机储存的密钥1234567# 拷贝密钥到远程计算机调试ssh-copy-id root@ip -p port -vvWARNING: REMOTE HOST IDENTIFICATION HAS CHANGED! # 上stackoverflow 说使用这个最简单的方法但问题没有解决。# &lt;host&gt; 远程计算机名/ipssh-keygen -R &lt;host&gt; 移除主机之前的标识信息解决问题！123456# 暴力解决，移除文件让它重新生成！rm ~/.ssh/known_hosts# 也可以这么做，清空文件echo '' &gt; ~/.ssh/known_hosts重新上传公钥okssh-copy-id root@ip -p port","tags":[{"name":"ssh-keygen","slug":"ssh-keygen","permalink":"https://benxin.xyz/tags/ssh-keygen/"}]},{"title":"使用Python和Selenium 模拟豆瓣登录.","date":"2019-08-01T15:07:41.225Z","path":"2019/08/01/Python+Selenium/","text":"安装ChromeDriver和Selenium 这里chrome选择,需要根据你所使用的chrome版本下载 比如我用的是74.0.3729.40（正式版本）所以选择74.xxx 版本的 ChromeDriver.123456789101112131415161718pip3 install selenium# 这里我用的是官方的下载地址,因为官网404了,如果你没有科学上网,也可以使用阿里的镜像进行下载安装.# 如果你以具有科学上网环境,也可以从官网下载安装. sudo vi /etc/wgetrc # 配置wget使用代理,在配置文件中添加以下四行代码,这样你就可以使用官方的地址安装ChromeDriver. https_proxy = 127.0.0.1:1080http_proxy = 127.0.0.1:1080ftp_proxy = 127.0.0.1:1080use_proxy = onwget https://chromedriver.storage.googleapis.com/74.0.3729.6/chromedriver_linux64.zip# 阿里镜像urlwget https://npm.taobao.org/mirrors/chromedriver/74.0.3729.6/chromedriver_linux64.zipunzip chromedriver_linux64.zip # 如果出现无法定位unzip软件包,安装一下即可.chmod +x chromedriver sudo mv -f chromedriver /usr/local/share/chromedriver sudo ln -s /usr/local/share/chromedriver /usr/local/bin/chromedriversudo ln -s /usr/local/share/chromedriver /usr/bin/chromedriver 如果你和我用的chrome版本不同，可以根据实际版本选择下载，当然也可直接更新你的Chrome到74+版本。ChromeDriver](https://sites.google.com/a/chromium.org/chromedriver/downloads) demo 123456789from selenium import webdriverdriver = webdriver.Chrome()driver.get(\"https://www.douban.com\")driver.switch_to.frame(0)driver.find_element_by_class_name(\"account-tab-account\").click()driver.find_element_by_id(\"username\").send_keys(\"your_username\")driver.find_element_by_id(\"password\").send_keys(\"your_password\")driver.find_element_by_partial_link_text(\"登录豆瓣\").click()","tags":[{"name":"Python","slug":"Python","permalink":"https://benxin.xyz/tags/Python/"}]},{"title":"Git 使用代理","date":"2019-08-01T15:07:41.213Z","path":"2019/08/01/git-proxy/","text":"Git 使用代理 有时候我们需要克隆一些比较大的文件时,因为网络环境的关系,这个时候就需要通过代理来提高速度. 先决条件 电脑已配置科学上网环境 方法一使用命令行1234567891011# 以下使用http代理git config --global http.proxy http://127.0.0.1:1080git config --global https.proxy https://127.0.0.1:1080# 以下使用socks5代理git config --global http.proxy socks5://127.0.0.1:1080git config --global https.proxy socks5://127.0.0.1:1080# 取消代理git config --global --unset http.proxygit config --global --unset https.proxy 方法二 直接修改配置文件12345678910111213# 打开git配置文件nano ~/.gitconfig# 复制以下配置 ctrl+shift+v 粘贴 ctrl+x 输入y保存[https]proxy = https://127.0.0.1:1080[http]proxy = http://127.0.0.1:1080[http] proxy = socks5://127.0.0.1:1080[https] proxy = socks5://127.0.0.1:1080","tags":[{"name":"git","slug":"git","permalink":"https://benxin.xyz/tags/git/"}]},{"title":"使用Termux 远程连接linux ，及使用python在手机上搭建一个简单的资源共享服务器。","date":"2019-08-01T14:23:59.423Z","path":"2019/08/01/Termux/","text":"Termux是一个Android终端模拟器和Linux环境应用程序，可直接使用，无需root或设置。自动安装最小基本系统，使用APT包管理器可以使用其他软件包。Termux 安装Google PlayF-Droid更换源文件及安装一些必要的软件12345678910# 添加国内的源文件,默认的是国外的,安装软件比较慢# 编辑源文件vi $PREFIX/etc/apt/sources.listdeb https://mirrors.ustc.edu.cn/termux stable maindeb https://mirrors.tuna.tsinghua.edu.cn/termux stable main# 或使用echo命令echo \"deb https://mirrors.ustc.edu.cn/termux stable main\" &gt;&gt; $PREFIX/etc/apt/sources.listecho \"deb https://mirrors.tuna.tsinghua.edu.cn/termux stable main\" &gt;&gt; $PREFIX/etc/apt/sources.listapt update PC 连接到手机1234567891011121314151617181920212223242526272829303132# 安装一些必要的软件apt install git vim zsh curl openssh python -y# 手机端生成密钥ssh-keygenssh-keygen -b 4096 -t rsa# 将生产的密钥复制到远程计算机ssh-copy-id username@your_ip -p your_ip# username计算机名可以使用whoami命令查看, your_ip 使用ip -a 命令查看# Linux ssh默认端口22 如果你修改过忘记了 使用vim 打开查看,如果开了防火墙请将端口号放行vi /etc/ssh/sshd_config # 找到port这行查看# 请参考我的进行替换 ssh-copy-id benxin@10.0.0.5 -p 2333 # 做完以上这些你就可以从Linux计算机使用ssh连接你的手机# whoami 手机上使用whoami查看用户名一般是u开头的 # termux 默认端口号 8022 可以自定义 0---65535 可以使用知名端口以外的其它端口sshd -p 233 # 设置端口号为233# Linux上使用ssh命令连接你的Android手机# 将u0_xx和10.0.0.8 替换成你自己的ssh u0_xx@10.0.0.8 -p 8022# 连接成功后可以在Linux执行下面的操作,手机上操作非常不方便.# 安装zsh替换默认的bashsh -c \"$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)\"vim .zshrc # 更改主题,修改zsh配置文件的这一行,不想修改可跳过ZSH_THEME=\"ys\"# 切换终端的shellchsh -s zsh# 简化命令alias psr='python -m http.server'alias h='history'alias clr='clear' Linux连接Android 连接pc1234# username计算机名可以使用whoami命令查看, your_ip 使用ip -a 命令查看 # Linux 默认端口22 如果你修改过忘记了 使用vim 打开查看,如果开了防火墙请将端口号放行vi /etc/ssh/sshd_configssh username@your_ip -p 2333 连接成功后可以使用手机控制Linux执行一些简单的操作 外部储存访问123456# 外部储存访问参考文档 https://wiki.termux.com/wiki/Termux-setup-storage# 执行以下命令termux-setup-storage$HOME/storage/# 禁用震动提示在`$HOME/.termux/termux.properties`文件中配置`bell-character = ignore` 获取 su权限123456git clone https://gitlab.com/st42/termux-sudo.git# 如果安装 ncurses-utils 报错,请安装这个版本的ncurses 再次执行3行的命令# apt install ncurses=6.1.20190511-5cd termux-sudo &amp;&amp; pkg install ncurses-utilscat sudo &gt; /data/data/com.termux/files/usr/bin/sudo chmod 700 /data/data/com.termux/files/usr/bin/sudo 在 Android 运行Termux app使用python做一些有趣的事使用python运行一个简单的http服务器 ,实现局域网pc共享手机资源. python -m http.server 在手机上桥这一段还是不太方便,可以试试 psr (alias psr=&apos;python -m http.server&apos; 之前将这行代码)简单的静态http server 如果你觉得功能太过简陋不能满足你的需求,你还可以使用python写一个功能更加完善的服务器更好的共享资源，也可以在上面跑rRequests 爬虫库使用爬虫抓取想要的资源。 使用PC端的浏览器预览手机资源也非常方便,局域的其它设备都可以访问.在浏览器输入手机的IP和端口号即可访问手机资源 例如 10.0.0.4:8000 在上图中可以看到局域网的IP 10.0.0.2 发送了一个GET请求，响应状态码200 请求成功！主目录 预览图片资源 播放媒体文件","tags":[{"name":"Termux","slug":"Termux","permalink":"https://benxin.xyz/tags/Termux/"}]},{"title":"Git 配置SSH密钥","date":"2019-08-01T14:23:59.419Z","path":"2019/08/01/Git 配置SSH密钥/","text":"Git 配置SSH密钥 生成SSH密钥1ssh-keygen -t rsa -b 4096 -C \"your_email@example.com\" 查看生成的密钥 并复制密钥1cat ~/.ssh/id_rsa.pub 将密钥配置到GitHub https 免密码配置 新建文件保存密码 1vim ~/.git-credentials 添加以下内容1https://&#123;username&#125;:&#123;passwd&#125;@github.com 添加git配置1git config --global credential.helper store 查看变化12cat ~/.gitconfigssh -T git@github.com","tags":[{"name":"git","slug":"git","permalink":"https://benxin.xyz/tags/git/"}]}]